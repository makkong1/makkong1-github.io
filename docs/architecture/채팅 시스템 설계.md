# ì±„íŒ… ì‹œìŠ¤í…œ ì„¤ê³„

## ì±„íŒ… í”„ë¡œì„¸ìŠ¤ íë¦„ (ë°©ì•ˆ 2: ë²”ìš© êµ¬ì¡°)

### 1. í«ì¼€ì–´ ìš”ì²­ ì±„íŒ… (CARE_REQUEST)

#### ë°©ì•ˆ A: ëŒ“ê¸€ ê¸°ë°˜ ì±„íŒ… (í˜„ì¬ êµ¬í˜„)

1. **í«ì¼€ì–´ ìš”ì²­ ì‘ì„± (CareRequest: OPEN)**
   - ë³´í˜¸ìê°€ í«ì¼€ì–´ ìš”ì²­ ê¸€ì„ ì‘ì„±í•˜ë©´ ìƒíƒœëŠ” `OPEN`ì´ ë¨.

2. **í«ì‹œí„°ê°€ ëŒ“ê¸€ ì‘ì„±**
   - `SERVICE_PROVIDER` ì—­í•  ì‚¬ìš©ìê°€ ëŒ“ê¸€(`CareRequestComment`) ì‘ì„±.
   - ëŒ“ê¸€ì€ ì§€ì› ì˜ì‚¬ í‘œí˜„ ì—­í• .
   - ë³´í˜¸ìì—ê²Œ "ìƒˆë¡œìš´ ëŒ“ê¸€ì´ ë‹¬ë ¸ìŠµë‹ˆë‹¤" ì•Œë¦¼ì´ ë°œì†¡ë¨.

3. **ë³´í˜¸ìê°€ ëŒ“ê¸€ ì‘ì„±ìì™€ ì±„íŒ… ì‹œì‘**
   - ë³´í˜¸ì(ê²Œì‹œê¸€ ì‘ì„±ì)ì—ê²Œ ëŒ“ê¸€ì— "ì±„íŒ…í•˜ê¸°" ë²„íŠ¼ í‘œì‹œ.
   - ëŒ“ê¸€ ì‘ì„±ì ì´ë¦„ í´ë¦­ ì‹œ í”„ë¡œí•„ ëª¨ë‹¬ í‘œì‹œ (ë¦¬ë·° ì •ë³´ í¬í•¨).
   - "ì±„íŒ…í•˜ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ 1:1 ì¼ë°˜ ì±„íŒ…(`DIRECT`) ì‹œì‘.
   - ê¸°ì¡´ ì±„íŒ…ë°©ì´ ìˆìœ¼ë©´ ì¬ì‚¬ìš©, ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±.

4. **ì±„íŒ…/í˜‘ìƒ**
   - ì±„íŒ…ë°©ì—ì„œ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ìœ¼ë©° ì„¸ë¶€ ì¡°ê±´ì„ í˜‘ì˜.
   - ë©”ì‹œì§€ ë„ì°© ì‹œ ì‹¤ì‹œê°„ ì•Œë¦¼.

5. **ì„œë¹„ìŠ¤ ì™„ë£Œ**
   - ì„œë¹„ìŠ¤ ì™„ë£Œ í›„ `CareRequest` ìƒíƒœ `COMPLETED`ë¡œ ë³€ê²½.
   - ì±„íŒ…ë°©ì€ ê³„ì† í™œì„± ìƒíƒœ ìœ ì§€.
   - í›„ê¸°(`CareReview`) ì‘ì„± ê°€ëŠ¥.

#### ë°©ì•ˆ B: ì§€ì› ìŠ¹ì¸ ê¸°ë°˜ ì±„íŒ… (í–¥í›„ êµ¬í˜„)

1. **í«ì¼€ì–´ ìš”ì²­ ì‘ì„± (CareRequest: OPEN)**
   - ë³´í˜¸ìê°€ í«ì¼€ì–´ ìš”ì²­ ê¸€ì„ ì‘ì„±í•˜ë©´ ìƒíƒœëŠ” `OPEN`ì´ ë¨.

2. **í«ì‹œí„°ê°€ 'ì§€ì›í•˜ê¸°' í´ë¦­**
   - í«ì‹œí„°ê°€ ìš”ì²­ì— ì§€ì›í•˜ë©´ `CareApplication`(ì§€ì›) ë ˆì½”ë“œê°€ ìƒì„±ë˜ê³ , ìƒíƒœëŠ” `PENDING`.
   - ë³´í˜¸ìì—ê²Œ "ìƒˆë¡œìš´ ì§€ì›ì´ ë“¤ì–´ì™”ìŠµë‹ˆë‹¤" ì•Œë¦¼ì´ ë°œì†¡ë¨.

3. **ë³´í˜¸ìê°€ ì§€ì› ìŠ¹ì¸**
   - ë³´í˜¸ìê°€ íŠ¹ì • ì§€ì›ìë¥¼ ìŠ¹ì¸í•˜ë©´ `CareApplication` ìƒíƒœê°€ `ACCEPTED`ë¡œ ë³€ê²½.
   - ë‚˜ë¨¸ì§€ ì§€ì›ìëŠ” `REJECTED` ì²˜ë¦¬.
   - ìŠ¹ì¸/ê±°ì ˆ ì•Œë¦¼ ë°œì†¡.

4. **ì±„íŒ…ë°© ìë™ ìƒì„±**
   - ìŠ¹ì¸ëœ ì§€ì›ìì™€ ë³´í˜¸ì ê°„ 1:1 ì±„íŒ…ë°©(`Conversation`) ìë™ ìƒì„±.
   - `conversation_type = 'CARE_REQUEST'`
   - `related_type = 'CARE_APPLICATION'`, `related_idx = careApplication.idx`
   - ì–‘ìª½ ëª¨ë‘ `ConversationParticipant`ì— ì¶”ê°€.

5. **ì±„íŒ…/í˜‘ìƒ**
   - ì±„íŒ…ë°©ì—ì„œ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ìœ¼ë©° ì„¸ë¶€ ì¡°ê±´ì„ í˜‘ì˜.
   - ë©”ì‹œì§€ ë„ì°© ì‹œ ì‹¤ì‹œê°„ ì•Œë¦¼.

6. **ì„œë¹„ìŠ¤ ì™„ë£Œ**
   - ì„œë¹„ìŠ¤ ì™„ë£Œ í›„ `CareRequest` ìƒíƒœ `COMPLETED`ë¡œ ë³€ê²½.
   - ì±„íŒ…ë°©ì€ `CLOSED` ë˜ëŠ” ê³„ì† í™œì„± ìƒíƒœ ìœ ì§€ ê°€ëŠ¥.
   - í›„ê¸°(`CareReview`) ì‘ì„± ê°€ëŠ¥.

**ì°¸ê³ **: í˜„ì¬ëŠ” ë°©ì•ˆ A(ëŒ“ê¸€ ê¸°ë°˜)ë¡œ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë©°, í–¥í›„ ë°©ì•ˆ B(ì§€ì› ìŠ¹ì¸ ê¸°ë°˜)ë¡œ ì „í™˜ ê°€ëŠ¥.

---

### 2. 1:1 ì¼ë°˜ ì±„íŒ… (DIRECT)

1. **ì‚¬ìš©ìê°€ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ì±„íŒ… ìš”ì²­**
   - ì‚¬ìš©ì í”„ë¡œí•„ì—ì„œ "ì±„íŒ…í•˜ê¸°" ë²„íŠ¼ í´ë¦­.
   - ë˜ëŠ” ê¸°ì¡´ ì±„íŒ…ë°©ì´ ìˆëŠ”ì§€ í™•ì¸.

2. **ì±„íŒ…ë°© ìƒì„± ë˜ëŠ” ê¸°ì¡´ ì±„íŒ…ë°© ì‚¬ìš©**
   - ê¸°ì¡´ ì±„íŒ…ë°©ì´ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±: `conversation_type = 'DIRECT'`
   - ì–‘ìª½ ì‚¬ìš©ìë¥¼ `ConversationParticipant`ì— ì¶”ê°€.

3. **ë©”ì‹œì§€ ì£¼ê³ ë°›ê¸°**
   - ì¼ë°˜ì ì¸ 1:1 ëŒ€í™”.
   - ë©”ì‹œì§€ ë„ì°© ì‹œ ì•Œë¦¼.

---

### 3. ê·¸ë£¹ ì±„íŒ… - ì‚°ì±…ëª¨ì„ (MEETUP)

1. **ëª¨ì„ ìƒì„±**
   - ì‚¬ìš©ìê°€ ì‚°ì±…ëª¨ì„(`Meetup`)ì„ ìƒì„±.

2. **ê·¸ë£¹ ì±„íŒ…ë°© ìë™ ìƒì„±**
   - ëª¨ì„ ìƒì„± ì‹œ ê·¸ë£¹ ì±„íŒ…ë°© ìë™ ìƒì„±.
   - `conversation_type = 'MEETUP'`
   - `related_type = 'MEETUP'`, `related_idx = meetup.idx`
   - `title = meetup.title` (ëª¨ì„ ì œëª©)
   - ì£¼ìµœìë§Œ ì´ˆê¸° ì°¸ì—¬ìë¡œ ì¶”ê°€ (`ConversationParticipant`)
   - ì£¼ìµœìëŠ” ìë™ìœ¼ë¡œ `ADMIN` ì—­í• .

3. **ëª¨ì„ ì°¸ì—¬**
   - ì‚¬ìš©ìê°€ ëª¨ì„ì— ì°¸ì—¬ (`MeetupParticipants` ì¶”ê°€).
   - ëª¨ì„ ì°¸ì—¬ì™€ ì±„íŒ… ì°¸ì—¬ëŠ” **ë¶„ë¦¬**ë¨.
   - ëª¨ì„ ì°¸ì—¬ ì™„ë£Œ í›„ "ì±„íŒ… ì°¸ì—¬í•˜ê¸°" ë²„íŠ¼ì´ í‘œì‹œë¨.

4. **ì±„íŒ… ì°¸ì—¬ (ìˆ˜ë™)**
   - ì‚¬ìš©ìê°€ "ì±„íŒ… ì°¸ì—¬í•˜ê¸°" ë²„íŠ¼ í´ë¦­.
   - `ConversationParticipant`ì— ì¶”ê°€ (`status = 'ACTIVE'`).
   - ìƒˆë¡œ ì°¸ì—¬í•œ ì‚¬ìš©ìëŠ” ì°¸ì—¬ ì‹œì  ì´í›„ ë©”ì‹œì§€ë§Œ ë³¼ ìˆ˜ ìˆìŒ.
     - `lastReadMessageIdx = null`, `lastReadAt = null`ë¡œ ì„¤ì •.
     - `joinedAt` ì´í›„ ë©”ì‹œì§€ë§Œ ì¡°íšŒ.

5. **ì±„íŒ… ì°¸ì—¬ ì¸ì› í‘œì‹œ**
   - ì±„íŒ…ë°©ì— í˜„ì¬ ì°¸ì—¬ ì¤‘ì¸ ì¸ì› ìˆ˜ í‘œì‹œ.
   - `ConversationParticipant` ì¤‘ `status = 'ACTIVE'`ì¸ ì¸ì› ìˆ˜.

6. **ê·¸ë£¹ ëŒ€í™”**
   - ì—¬ëŸ¬ ì°¸ì—¬ìê°€ í•¨ê»˜ ëŒ€í™”.
   - ì°¸ì—¬ìë³„ ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ê´€ë¦¬.
   - ì°¸ì—¬ ì‹œì  ì´í›„ ë©”ì‹œì§€ë§Œ ì¡°íšŒ ê°€ëŠ¥ (ì¬ì°¸ì—¬ ì‹œ ì´ì „ ëŒ€í™” ë‚´ìš© ëª» ë´„).

7. **ëª¨ì„ ì°¸ì—¬ ì·¨ì†Œ**
   - ì‚¬ìš©ìê°€ ëª¨ì„ ì°¸ì—¬ ì·¨ì†Œ ì‹œ ì±„íŒ…ë°©ì—ì„œë„ **ìë™ìœ¼ë¡œ ë‚˜ê°€ê¸°**.
   - `ConversationParticipant.status = 'LEFT'`, `leftAt` ì„¤ì •.
   - ì±„íŒ…ë°© ì°¸ì—¬ ì¸ì› ìˆ˜ ìë™ ê°ì†Œ.

8. **ì±„íŒ… ì¬ì°¸ì—¬**
   - ëª¨ì„ ì°¸ì—¬ í›„ ë‹¤ì‹œ ì±„íŒ… ì°¸ì—¬ ë²„íŠ¼ í´ë¦­.
   - ê¸°ì¡´ `ConversationParticipant`ì˜ `status`ë¥¼ `ACTIVE`ë¡œ ë³€ê²½.
   - `joinedAt` ì—…ë°ì´íŠ¸.
   - `lastReadMessageIdx`, `lastReadAt` ì´ˆê¸°í™” (ì´ì „ ëŒ€í™” ë‚´ìš© ëª» ë´„).
   - ì¬ì°¸ì—¬ ì‹œì  ì´í›„ ë©”ì‹œì§€ë§Œ ì¡°íšŒ ê°€ëŠ¥.

9. **ëª¨ì„ ì¢…ë£Œ ì‹œ**
   - ì±„íŒ…ë°©ì€ `CLOSED` ë˜ëŠ” ê³„ì† í™œì„± ìƒíƒœ ìœ ì§€ ê°€ëŠ¥.

---

### 4. ì‹¤ì¢…ì œë³´ ì±„íŒ… (MISSING_PET)

1. **ì‹¤ì¢…ì œë³´ ì‘ì„±**
   - ì‚¬ìš©ìê°€ ì‹¤ì¢…ë™ë¬¼ ì œë³´(`MissingPetBoard`) ì‘ì„±.
   - ì±„íŒ…ë°©ì€ ì•„ì§ ìƒì„±ë˜ì§€ ì•ŠìŒ (ëª©ê²©ìê°€ ìˆì„ ë•Œ ìƒì„±).

2. **ì±„íŒ… ìš”ì²­ ("ëª©ê²©í–ˆì–´ìš”" ë²„íŠ¼ í´ë¦­)**
   - ë‹¤ë¥¸ ì‚¬ìš©ìê°€ "ì‹¤ì¢…ë™ë¬¼ ëª©ê²©í–ˆì–´ìš”" ë²„íŠ¼ í´ë¦­.
   - ì œë³´ìì™€ ëª©ê²©ì ê°„ 1:1 ì±„íŒ…ë°© ìƒì„± ë˜ëŠ” ê¸°ì¡´ ì±„íŒ…ë°© ì¡°íšŒ.
   - `conversation_type = 'MISSING_PET'`
   - `related_type = 'MISSING_PET_BOARD'`, `related_idx = missingPetBoard.idx`
   - ì œë³´ì ë³¸ì¸ì€ ìì‹ ì˜ ì œë³´ì— ëŒ€í•´ ì±„íŒ… ì‹œì‘ ë¶ˆê°€.

3. **ì¤‘ë³µ ì±„íŒ…ë°© ë°©ì§€**
   - ê°™ì€ ì œë³´ì— ëŒ€í•´ ì—¬ëŸ¬ ëª©ê²©ìê°€ ìˆì„ ìˆ˜ ìˆìŒ.
   - ì œë³´ì-ëª©ê²©ì ì¡°í•©ë³„ë¡œ ê°œë³„ ì±„íŒ…ë°© ìƒì„±.
   - ê°™ì€ ì œë³´ì-ëª©ê²©ì ì¡°í•©ì— ëŒ€í•´ ê¸°ì¡´ ì±„íŒ…ë°©ì´ ìˆìœ¼ë©´ ì¬ì‚¬ìš©.
   - `related_idx`ë§Œìœ¼ë¡œëŠ” êµ¬ë¶„ ë¶ˆê°€í•˜ë¯€ë¡œ, `ConversationParticipant`ë¡œ ì œë³´ìì™€ ëª©ê²©ì ëª¨ë‘ ì°¸ì—¬í•œ ì±„íŒ…ë°© í™•ì¸.

4. **ì •ë³´ êµí™˜**
   - ì‹¤ì¢…ë™ë¬¼ ê´€ë ¨ ì •ë³´ ì£¼ê³ ë°›ê¸°.
   - ì‚¬ì§„ ê³µìœ  ë“±.
   - ë©”ì‹œì§€ ë„ì°© ì‹œ ì‹¤ì‹œê°„ ì•Œë¦¼.

5. **ì œë³´ í•´ê²° ì‹œ**
   - ì œë³´ ìƒíƒœê°€ `FOUND` ë“±ìœ¼ë¡œ ë³€ê²½ë˜ë©´ ì±„íŒ…ë°©ì€ ê³„ì† í™œì„± ìƒíƒœ ìœ ì§€ ê°€ëŠ¥.
   - ë˜ëŠ” ì±„íŒ…ë°© ìƒíƒœë¥¼ `CLOSED`ë¡œ ë³€ê²½ (ì„ íƒì‚¬í•­).

---

### 5. ê´€ë¦¬ì ì§€ì› ì±„íŒ… (ADMIN_SUPPORT)

1. **ì‚¬ìš©ìê°€ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜**
   - ì‚¬ìš©ìê°€ "ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ê¸°" ë²„íŠ¼ í´ë¦­.

2. **ì±„íŒ…ë°© ìƒì„±**
   - ì‚¬ìš©ìì™€ ê´€ë¦¬ì ê°„ 1:1 ì±„íŒ…ë°© ìƒì„±.
   - `conversation_type = 'ADMIN_SUPPORT'`
   - `related_type = 'USER'`, `related_idx = userId`
   - ê´€ë¦¬ìëŠ” `ADMIN` ì—­í• .

3. **ë¬¸ì˜ ë° ë‹µë³€**
   - ì‚¬ìš©ìê°€ ë¬¸ì˜, ê´€ë¦¬ìê°€ ë‹µë³€.
   - ë‹µë³€ ì™„ë£Œ í›„ ì±„íŒ…ë°© `CLOSED` ì²˜ë¦¬.

---

## WebSocket ì‹¤ì‹œê°„ ì±„íŒ… êµ¬í˜„ í”Œë¡œìš°

### ê¸°ìˆ  ìŠ¤íƒ
- **ë°±ì—”ë“œ**: Spring WebSocket + STOMP Protocol
- **í”„ë¡ íŠ¸ì—”ë“œ**: SockJS + STOMP.js
- **ì¸ì¦**: JWT Token (WebSocket ì—°ê²° ì‹œ ì „ë‹¬)

### WebSocket ì—°ê²° ì„¤ì •

```
1. í´ë¼ì´ì–¸íŠ¸: WebSocket ì—°ê²° ìš”ì²­
   - URL: ws://localhost:8080/chat
   - í—¤ë”ì— JWT í† í° í¬í•¨
   
2. ì„œë²„: ì—°ê²° ìŠ¹ì¸ ë° ì¸ì¦
   - JWT í† í° ê²€ì¦
   - ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
   - ì—°ê²° ì„¸ì…˜ ì €ì¥ (ì‚¬ìš©ì ID â†’ ì„¸ì…˜ ë§¤í•‘)
   
3. í´ë¼ì´ì–¸íŠ¸: ì—°ê²° ì„±ê³µ ì‹œ ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ
   - REST API: GET /api/chat/conversations
   - í™œì„± ì±„íŒ…ë°© ëª©ë¡ ë¡œë“œ
```

### ì±„íŒ…ë°© êµ¬ë…

```
1. ì‚¬ìš©ìê°€ ì±„íŒ…ë°© í´ë¦­
   â†’ ì±„íŒ…ë°© ID í™•ì¸

2. í•´ë‹¹ ì±„íŒ…ë°© êµ¬ë…
   â†’ STOMP subscribe: /topic/conversation/{conversationId}
   
3. ì„œë²„: êµ¬ë… í™•ì¸
   â†’ ì‚¬ìš©ìê°€ í•´ë‹¹ ì±„íŒ…ë°© ì°¸ì—¬ìì¸ì§€ ê²€ì¦
   â†’ ì°¸ì—¬ìë©´ êµ¬ë… ìŠ¹ì¸

4. ìµœì‹  ë©”ì‹œì§€ ë¡œë“œ (ì´ˆê¸°)
   â†’ REST API: GET /api/chat/conversations/{conversationId}/messages
   â†’ í˜ì´ì§•: ìµœì‹  50ê°œ ë©”ì‹œì§€
```

### ë©”ì‹œì§€ ì „ì†¡ í”Œë¡œìš°

```
1. í´ë¼ì´ì–¸íŠ¸: ë©”ì‹œì§€ ì…ë ¥ ë° ì „ì†¡
   â†’ STOMP send: /app/chat.send
   â†’ Payload: { conversationId, content, messageType }
   
2. ì„œë²„: ë©”ì‹œì§€ ì²˜ë¦¬
   a) ChatMessageService.sendMessage() í˜¸ì¶œ
   b) ì „ì†¡ì ê²€ì¦ (ì°¸ì—¬ìì¸ì§€ í™•ì¸)
   c) ë©”ì‹œì§€ ì €ì¥ (ChatMessage í…Œì´ë¸”)
   d) Conversation ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
      - lastMessageAt ì—…ë°ì´íŠ¸
      - lastMessagePreview ì—…ë°ì´íŠ¸
   e) ì°¸ì—¬ìë“¤ì˜ ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ì¦ê°€ (ë³¸ì¸ ì œì™¸)
   
3. ì„œë²„: ì±„íŒ…ë°© ì°¸ì—¬ìë“¤ì—ê²Œ ë¸Œë¡œë“œìºìŠ¤íŠ¸
   â†’ STOMP publish: /topic/conversation/{conversationId}
   â†’ Payload: ChatMessageDTO
   
4. í´ë¼ì´ì–¸íŠ¸: ë©”ì‹œì§€ ìˆ˜ì‹ 
   â†’ êµ¬ë…í•œ ì±„íŒ…ë°©ì˜ ëª¨ë“  ì°¸ì—¬ìê°€ ë©”ì‹œì§€ ìˆ˜ì‹ 
   â†’ UIì— ì¦‰ì‹œ ë©”ì‹œì§€ í‘œì‹œ
```

### ë©”ì‹œì§€ ìˆ˜ì‹  í”Œë¡œìš°

```
1. ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ë©”ì‹œì§€ ì „ì†¡
   â†’ ì„œë²„ì—ì„œ ì²˜ë¦¬ (ë©”ì‹œì§€ ì „ì†¡ í”Œë¡œìš° ì°¸ê³ )

2. ì„œë²„: ì±„íŒ…ë°© êµ¬ë…ìì—ê²Œ ë¸Œë¡œë“œìºìŠ¤íŠ¸
   â†’ /topic/conversation/{conversationId}ë¡œ ë©”ì‹œì§€ ì „ì†¡

3. í´ë¼ì´ì–¸íŠ¸: ì‹¤ì‹œê°„ ë©”ì‹œì§€ ìˆ˜ì‹ 
   â†’ STOMP ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆì—ì„œ ìˆ˜ì‹ 
   â†’ ì±„íŒ…ë°©ì´ í˜„ì¬ ì—´ë ¤ìˆìœ¼ë©´ ì¦‰ì‹œ í‘œì‹œ
   â†’ ì±„íŒ…ë°©ì´ ë‹«í˜€ìˆìœ¼ë©´:
     - ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ì¦ê°€ (ë±ƒì§€ í‘œì‹œ)
     - ì•Œë¦¼ í‘œì‹œ (ì„ íƒì‚¬í•­)

4. ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ì—…ë°ì´íŠ¸
   â†’ ConversationParticipant.unreadCount ìë™ ì¦ê°€ (ì„œë²„ì—ì„œ)
   â†’ í´ë¼ì´ì–¸íŠ¸ëŠ” ì±„íŒ…ë°© ëª©ë¡ì—ì„œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
```

### ì½ìŒ ì²˜ë¦¬ í”Œë¡œìš°

```
1. ì‚¬ìš©ìê°€ ì±„íŒ…ë°© ì—´ê¸°
   â†’ ì±„íŒ…ë°© ë©”ì‹œì§€ ì¡°íšŒ
   
2. ë©”ì‹œì§€ ì½ìŒ ì²˜ë¦¬
   â†’ REST API: POST /api/chat/conversations/{conversationId}/read
   â†’ ë˜ëŠ” WebSocket: /app/chat.read
   
3. ì„œë²„: ì½ìŒ ì²˜ë¦¬
   a) ConversationParticipant.unreadCount = 0
   b) ConversationParticipant.lastReadMessageIdx ì—…ë°ì´íŠ¸
   c) ConversationParticipant.lastReadAt ì—…ë°ì´íŠ¸
   d) MessageReadStatus ê¸°ë¡ (ì„ íƒì‚¬í•­)
   
4. ë‹¤ë¥¸ ì°¸ì—¬ìì—ê²Œ ì½ìŒ ìƒíƒœ ì „ì†¡ (ì„ íƒì‚¬í•­)
   â†’ /topic/conversation/{conversationId}/read
   â†’ "ì‚¬ìš©ì Aê°€ ë©”ì‹œì§€ë¥¼ ì½ì—ˆìŠµë‹ˆë‹¤" ì•Œë¦¼
```

### ì´ë¯¸ì§€/íŒŒì¼ ì „ì†¡ í”Œë¡œìš° âœ… **êµ¬í˜„ ì™„ë£Œ**

```
1. í´ë¼ì´ì–¸íŠ¸: íŒŒì¼ ì„ íƒ
   â†’ ì´ë¯¸ì§€ ë˜ëŠ” íŒŒì¼ ì„ íƒ
   â†’ âœ… ì±„íŒ… ì…ë ¥ì°½ì— ì´ë¯¸ì§€ ì—…ë¡œë“œ ë²„íŠ¼(ğŸ“·) ì œê³µ

2. íŒŒì¼ ì—…ë¡œë“œ
   â†’ âœ… REST API: uploadApi.uploadImage() ì‚¬ìš©
   â†’ FileTargetType: CHAT_MESSAGE
   â†’ íŒŒì¼ ì—…ë¡œë“œ í›„ filePath ë°˜í™˜

3. ë©”ì‹œì§€ ì „ì†¡ (íŒŒì¼ í¬í•¨)
   â†’ STOMP send: /app/chat.send
   â†’ Payload: { 
       conversationId, 
       content: "[ì´ë¯¸ì§€]" ë˜ëŠ” "[íŒŒì¼]", 
       messageType: "IMAGE" ë˜ëŠ” "FILE",
       filePath: ì—…ë¡œë“œëœ íŒŒì¼ ê²½ë¡œ
     }

4. ì„œë²„: ë©”ì‹œì§€ ì €ì¥
   â†’ ChatMessage ì €ì¥ (messageType, content)
   â†’ AttachmentFile ì—°ê²° (targetType: CHAT_MESSAGE)

5. ë©”ì‹œì§€ ë¸Œë¡œë“œìºìŠ¤íŠ¸
   â†’ ë™ì¼í•˜ê²Œ ëª¨ë“  ì°¸ì—¬ìì—ê²Œ ì „ì†¡
   â†’ âœ… ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ë° í™•ëŒ€ ëª¨ë‹¬ ì œê³µ
```

### ì—°ê²° ì¢…ë£Œ í”Œë¡œìš°

```
1. í´ë¼ì´ì–¸íŠ¸: í˜ì´ì§€ ì´íƒˆ ë˜ëŠ” ì—°ê²° ì¢…ë£Œ
   â†’ WebSocket ì—°ê²° ìë™ ì¢…ë£Œ
   
2. ì„œë²„: ì—°ê²° ì¢…ë£Œ ê°ì§€
   â†’ WebSocketEventListenerì—ì„œ ì²˜ë¦¬
   â†’ ì‚¬ìš©ì ì„¸ì…˜ ì œê±°
   â†’ ì±„íŒ…ë°© êµ¬ë… í•´ì œ

3. ì¬ì—°ê²° ì‹œ
   â†’ ìë™ ì¬ì—°ê²° (SockJS ì‚¬ìš© ì‹œ)
   â†’ ë˜ëŠ” ìˆ˜ë™ ì¬ì—°ê²°
   â†’ ê¸°ì¡´ ì±„íŒ…ë°© ë‹¤ì‹œ êµ¬ë…
```

### ì±„íŒ…ë°© ìƒì„± í”Œë¡œìš° (WebSocket ì—°ë™)

```
1. í«ì¼€ì–´ ì§€ì› ìŠ¹ì¸
   â†’ CareApplication ìƒíƒœê°€ ACCEPTEDë¡œ ë³€ê²½
   
2. ì±„íŒ…ë°© ìƒì„±
   â†’ REST API: POST /api/chat/conversations
   â†’ Conversation ìƒì„±
   â†’ ConversationParticipant ìƒì„± (ì–‘ìª½ ì‚¬ìš©ì)

3. ì•Œë¦¼ ì „ì†¡ (SSE)
   â†’ "ì±„íŒ…ë°©ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤" ì•Œë¦¼

4. ì‚¬ìš©ìê°€ ì±„íŒ…ë°© í´ë¦­
   â†’ WebSocket ì—°ê²° (ì•„ì§ ì•ˆ ë˜ì–´ìˆìœ¼ë©´)
   â†’ ì±„íŒ…ë°© êµ¬ë…
   â†’ ë©”ì‹œì§€ ë¡œë“œ
```

### íƒ€ì´í•‘ í‘œì‹œ í”Œë¡œìš° (ì„ íƒì‚¬í•­)

```
1. ì‚¬ìš©ìê°€ ë©”ì‹œì§€ ì…ë ¥ ì¤‘
   â†’ WebSocket: /app/chat.typing
   â†’ Payload: { conversationId, isTyping: true }

2. ì„œë²„: ë‹¤ë¥¸ ì°¸ì—¬ìì—ê²Œ ë¸Œë¡œë“œìºìŠ¤íŠ¸
   â†’ /topic/conversation/{conversationId}/typing
   â†’ "ì‚¬ìš©ì Aê°€ ì…ë ¥ ì¤‘..."

3. ì…ë ¥ ì¤‘ì§€ (3ì´ˆ í›„ ìë™)
   â†’ /app/chat.typing
   â†’ Payload: { conversationId, isTyping: false }
```

### ì—ëŸ¬ ì²˜ë¦¬ í”Œë¡œìš°

```
1. ì—°ê²° ì‹¤íŒ¨
   â†’ ìë™ ì¬ì—°ê²° ì‹œë„ (SockJS)
   â†’ 3íšŒ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
   
2. ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨
   â†’ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
   â†’ ì¬ì „ì†¡ ë²„íŠ¼ ì œê³µ (ë¡œì»¬ì— ë©”ì‹œì§€ ì €ì¥)

3. ì¸ì¦ ì‹¤íŒ¨
   â†’ ì—°ê²° ê±°ë¶€
   â†’ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

4. ì±„íŒ…ë°© ê¶Œí•œ ì—†ìŒ
   â†’ êµ¬ë… ê±°ë¶€
   â†’ ì—ëŸ¬ ë©”ì‹œì§€ ì „ì†¡
```

### STOMP ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°

```
**í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„ (Send)**
/app/chat.send          # ë©”ì‹œì§€ ì „ì†¡
/app/chat.read          # ì½ìŒ ì²˜ë¦¬
/app/chat.typing        # íƒ€ì´í•‘ í‘œì‹œ (ì„ íƒ)

**ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸ (Subscribe)**
/topic/conversation/{conversationId}              # ì±„íŒ…ë°© ë©”ì‹œì§€
/topic/conversation/{conversationId}/typing      # íƒ€ì´í•‘ í‘œì‹œ
/topic/conversation/{conversationId}/read        # ì½ìŒ ìƒíƒœ
/user/{userId}/queue/messages                    # ê°œì¸ ë©”ì‹œì§€/ì•Œë¦¼
```

### ì„±ëŠ¥ ìµœì í™”

```
1. DB ì¸ë±ìŠ¤ ìµœì í™”
   â†’ ChatMessage: (conversation_idx, created_at DESC) ì¸ë±ìŠ¤
   â†’ Conversation: (status, last_message_at DESC) ì¸ë±ìŠ¤
   â†’ ConversationParticipant: (user_idx, status) ì¸ë±ìŠ¤
   â†’ ë©”ì‹œì§€ ì¡°íšŒëŠ” DBì—ì„œ ì§ì ‘ ì²˜ë¦¬ (ìºì‹± ë¶ˆí•„ìš”)

2. í˜ì´ì§• ì²˜ë¦¬
   â†’ ìµœì‹  50ê°œ ë©”ì‹œì§€ë§Œ ë¡œë“œ
   â†’ ë¬´í•œ ìŠ¤í¬ë¡¤ë¡œ ê³¼ê±° ë©”ì‹œì§€ ë¡œë“œ
   â†’ ì»¤ì„œ ê¸°ë°˜ í˜ì´ì§• ì‚¬ìš©

3. ë©”ì‹œì§€ ë°°ì¹˜ ì „ì†¡ (ì„ íƒì‚¬í•­)
   â†’ ì—¬ëŸ¬ ë©”ì‹œì§€ë¥¼ í•œ ë²ˆì— ë¸Œë¡œë“œìºìŠ¤íŠ¸

4. ì—°ê²° í’€ ê´€ë¦¬
   â†’ ì‚¬ìš©ìë³„ ìµœëŒ€ ì—°ê²° ìˆ˜ ì œí•œ
   â†’ ì¤‘ë³µ ì—°ê²° ë°©ì§€

5. ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜
   â†’ ConversationParticipant í…Œì´ë¸”ì— ì €ì¥
   â†’ DBì—ì„œ ì§ì ‘ ì¡°íšŒ (Redis ìºì‹± ë¶ˆí•„ìš”)
   â†’ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

**ì£¼ì˜**: ì±„íŒ… ë©”ì‹œì§€ëŠ” ìì£¼ ì—…ë°ì´íŠ¸ë˜ë¯€ë¡œ Redis ìºì‹±ì€ ë¹„íš¨ìœ¨ì 
â†’ DB ì¸ë±ìŠ¤ ìµœì í™”ì™€ í˜ì´ì§•ìœ¼ë¡œ ì¶©ë¶„
```

## ê³µí†µ í”„ë¡œì„¸ìŠ¤

### ì±„íŒ…ë°© ìƒì„± ê³µí†µ ë¡œì§

```java
@Transactional
public Conversation createConversation(
    ConversationType type,
    RelatedType relatedType,
    Long relatedIdx,
    String title,
    List<Long> participantUserIds
) {
    // 1. Conversation ìƒì„±
    Conversation conversation = Conversation.builder()
        .conversationType(type)
        .relatedType(relatedType)
        .relatedIdx(relatedIdx)
        .title(title)
        .status(ConversationStatus.ACTIVE)
        .build();
    conversation = conversationRepository.save(conversation);
    
    // 2. ì°¸ì—¬ì ì¶”ê°€
    for (Long userId : participantUserIds) {
        ConversationParticipant participant = ConversationParticipant.builder()
            .conversation(conversation)
            .user(usersRepository.findById(userId).orElseThrow())
            .role(ParticipantRole.MEMBER)
            .status(ParticipantStatus.ACTIVE)
            .unreadCount(0)
            .build();
        participantRepository.save(participant);
    }
    
    // 3. ì•Œë¦¼ ë°œì†¡
    for (Long userId : participantUserIds) {
        notificationService.createNotification(...);
    }
    
    return conversation;
}
```

### ë©”ì‹œì§€ ì „ì†¡ ê³µí†µ ë¡œì§

```java
@Transactional
public ChatMessage sendMessage(Long conversationIdx, Long senderIdx, String content, MessageType messageType) {
    // 1. ì „ì†¡ì í™•ì¸
    Users sender = usersRepository.findById(senderIdx).orElseThrow();
    if (sender.getIsDeleted()) {
        throw new IllegalStateException("íƒˆí‡´í•œ ì‚¬ìš©ìëŠ” ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    }
    
    // 2. ì±„íŒ…ë°© í™•ì¸
    Conversation conversation = conversationRepository.findById(conversationIdx).orElseThrow();
    ConversationParticipant senderParticipant = participantRepository
        .findByConversationIdxAndUserIdx(conversationIdx, senderIdx)
        .orElseThrow(() -> new IllegalArgumentException("ì±„íŒ…ë°© ì°¸ì—¬ìê°€ ì•„ë‹™ë‹ˆë‹¤."));
    
    // 3. ë©”ì‹œì§€ ì €ì¥
    ChatMessage message = ChatMessage.builder()
        .conversation(conversation)
        .sender(sender)
        .content(content)
        .messageType(messageType != null ? messageType : MessageType.TEXT)
        .build();
    message = chatMessageRepository.save(message);
    
    // 4. ì°¸ì—¬ìë“¤ì˜ ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ì¦ê°€
    List<ConversationParticipant> participants = participantRepository
        .findByConversationIdxAndStatus(conversationIdx, ParticipantStatus.ACTIVE);
    
    for (ConversationParticipant p : participants) {
        if (!p.getUser().getIdx().equals(senderIdx)) {
            p.incrementUnreadCount();
            participantRepository.save(p);
        }
    }
    
    // 5. Conversation ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
    conversation.setLastMessageAt(LocalDateTime.now());
    String preview = messageType == MessageType.IMAGE ? "[ì‚¬ì§„]" : 
                    messageType == MessageType.FILE ? "[íŒŒì¼]" : 
                    content.substring(0, Math.min(200, content.length()));
    conversation.setLastMessagePreview(preview);
    conversationRepository.save(conversation);
    
    // 6. ì•Œë¦¼ ë°œì†¡
    for (ConversationParticipant p : participants) {
        if (!p.getUser().getIdx().equals(senderIdx) && !p.getUser().getIsDeleted()) {
            notificationService.createNotification(...);
        }
    }
    
    return message;
}
```

## í…Œì´ë¸” êµ¬ì¡° ì„¤ê³„

### ì±„íŒ… ì‹œìŠ¤í…œ ë²”ìš© êµ¬ì¡° (í™•ì¥ ê°€ëŠ¥) â­ ê¶Œì¥
- ë‹¤ì–‘í•œ ìš©ë„ë¡œ í™•ì¥ ê°€ëŠ¥
- 1:1, ê·¸ë£¹ ì±„íŒ… ëª¨ë‘ ì§€ì›
- í´ë¦¬ëª¨í”½ ê´€ê³„ë¡œ ë‹¤ì–‘í•œ ë„ë©”ì¸ ì—°ê²°

---

## ì±„íŒ… ì‹œìŠ¤í…œ ë²”ìš© êµ¬ì¡° (í™•ì¥ ê°€ëŠ¥) â­

### í•µì‹¬ ì„¤ê³„ ì›ì¹™

1. **ë‹¤ì–‘í•œ ì±„íŒ… íƒ€ì… ì§€ì›**: 1:1, ê·¸ë£¹, ê´€ë¦¬ì ë“±
2. **ì°¸ì—¬ì ê¸°ë°˜ ê´€ë¦¬**: ConversationParticipant í…Œì´ë¸”ë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„
3. **í´ë¦¬ëª¨í”½ ê´€ê³„**: ë‹¤ì–‘í•œ ë„ë©”ì¸ê³¼ ì—°ê²° ê°€ëŠ¥
4. **ì°¸ì—¬ìë³„ ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜**: ê°œì¸í™”ëœ ì•Œë¦¼

### 1. Conversation (ì±„íŒ…ë°©) í…Œì´ë¸” - ë²”ìš© êµ¬ì¡°

```sql
CREATE TABLE Conversation (
    idx BIGINT PRIMARY KEY AUTO_INCREMENT,
    
    -- ì±„íŒ…ë°© íƒ€ì…
    conversation_type ENUM(
        'DIRECT',           -- 1:1 ì¼ë°˜ ì±„íŒ…
        'GROUP',            -- ê·¸ë£¹ ì±„íŒ…
        'CARE_REQUEST',     -- í«ì¼€ì–´ ìš”ì²­ ì±„íŒ…
        'MISSING_PET',      -- ì‹¤ì¢…ì œë³´ ì±„íŒ…
        'MEETUP',           -- ì‚°ì±…ëª¨ì„ ì±„íŒ…
        'ADMIN_SUPPORT'     -- ê´€ë¦¬ì ì§€ì› ì±„íŒ…
    ) NOT NULL,
    
    -- ì±„íŒ…ë°© ì´ë¦„ (ê·¸ë£¹ ì±„íŒ…ìš©)
    title VARCHAR(200) NULL,
    
    -- ê´€ë ¨ ì—”í‹°í‹° (í´ë¦¬ëª¨í”½ ê´€ê³„)
    related_type ENUM(
        'CARE_REQUEST',
        'CARE_APPLICATION',
        'MISSING_PET_BOARD',
        'MEETUP',
        'USER'
    ) NULL,
    related_idx BIGINT NULL,  -- ê´€ë ¨ ì—”í‹°í‹° ID
    
    -- ìƒíƒœ
    status ENUM('ACTIVE', 'CLOSED', 'ARCHIVED') DEFAULT 'ACTIVE',
    
    -- ë©”íƒ€ë°ì´í„°
    last_message_at DATETIME NULL,
    last_message_preview VARCHAR(200) NULL,
    
    -- Soft Delete
    is_deleted BOOLEAN DEFAULT FALSE,
    deleted_at DATETIME NULL,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- ì œì•½ì¡°ê±´
    -- related_typeê³¼ related_idxëŠ” í•¨ê»˜ NULLì´ê±°ë‚˜ í•¨ê»˜ NOT NULL
    CONSTRAINT chk_related_fields 
        CHECK ((related_type IS NULL AND related_idx IS NULL) 
               OR (related_type IS NOT NULL AND related_idx IS NOT NULL))
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_conversation_type_status 
ON Conversation(conversation_type, status, last_message_at DESC);

CREATE INDEX idx_conversation_related 
ON Conversation(related_type, related_idx);

CREATE INDEX idx_conversation_deleted 
ON Conversation(is_deleted, deleted_at);
```

### 2. ConversationParticipant (ì±„íŒ…ë°© ì°¸ì—¬ì) í…Œì´ë¸”

```sql
CREATE TABLE ConversationParticipant (
    idx BIGINT PRIMARY KEY AUTO_INCREMENT,
    
    -- ê´€ê³„
    conversation_idx BIGINT NOT NULL,
    user_idx BIGINT NOT NULL,
    
    -- ì—­í•  (ê·¸ë£¹ ì±„íŒ…ì—ì„œ ì‚¬ìš©)
    role ENUM('MEMBER', 'ADMIN', 'MODERATOR') DEFAULT 'MEMBER',
    
    -- ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜
    unread_count INT DEFAULT 0,
    
    -- ë§ˆì§€ë§‰ ì½ì€ ë©”ì‹œì§€ ID (ì„ íƒì‚¬í•­)
    last_read_message_idx BIGINT NULL,
    last_read_at DATETIME NULL,
    
    -- ì°¸ì—¬ ìƒíƒœ
    status ENUM('ACTIVE', 'LEFT', 'KICKED', 'MUTED') DEFAULT 'ACTIVE',
    
    -- ì°¸ì—¬ ì‹œê°„
    joined_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    left_at DATETIME NULL,
    
    -- Soft Delete
    is_deleted BOOLEAN DEFAULT FALSE,
    deleted_at DATETIME NULL,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- ì œì•½ì¡°ê±´
    FOREIGN KEY (conversation_idx) REFERENCES Conversation(idx) ON DELETE CASCADE,
    FOREIGN KEY (user_idx) REFERENCES Users(idx),
    FOREIGN KEY (last_read_message_idx) REFERENCES ChatMessage(idx) ON DELETE SET NULL,
    
    -- í•œ ì‚¬ìš©ìëŠ” ê°™ì€ ì±„íŒ…ë°©ì— ì¤‘ë³µ ì°¸ì—¬ ë¶ˆê°€
    UNIQUE KEY uk_participant_conversation_user (conversation_idx, user_idx)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_participant_user_status 
ON ConversationParticipant(user_idx, status, unread_count DESC);

CREATE INDEX idx_participant_conversation 
ON ConversationParticipant(conversation_idx, status);

CREATE INDEX idx_participant_unread 
ON ConversationParticipant(user_idx, unread_count) WHERE unread_count > 0;
```

### 3. ChatMessage (ì±„íŒ… ë©”ì‹œì§€) í…Œì´ë¸” - ë²”ìš© êµ¬ì¡°

```sql
CREATE TABLE ChatMessage (
    idx BIGINT PRIMARY KEY AUTO_INCREMENT,
    
    -- ê´€ê³„
    conversation_idx BIGINT NOT NULL,
    sender_idx BIGINT NOT NULL,
    
    -- ë©”ì‹œì§€ íƒ€ì…
    message_type ENUM('TEXT', 'IMAGE', 'FILE', 'SYSTEM', 'NOTICE') DEFAULT 'TEXT',
    
    -- ë‚´ìš©
    content TEXT NOT NULL,
    
    -- ë©”ì‹œì§€ ì°¸ì¡° (ë‹µì¥ ê¸°ëŠ¥)
    reply_to_message_idx BIGINT NULL,
    
    -- Soft Delete
    is_deleted BOOLEAN DEFAULT FALSE,
    deleted_at DATETIME NULL,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- ì œì•½ì¡°ê±´
    FOREIGN KEY (conversation_idx) REFERENCES Conversation(idx) ON DELETE CASCADE,
    FOREIGN KEY (sender_idx) REFERENCES Users(idx),
    FOREIGN KEY (reply_to_message_idx) REFERENCES ChatMessage(idx) ON DELETE SET NULL
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_chat_message_conversation_created 
ON ChatMessage(conversation_idx, created_at DESC);

CREATE INDEX idx_chat_message_sender 
ON ChatMessage(sender_idx, created_at DESC);

CREATE INDEX idx_chat_message_type 
ON ChatMessage(message_type, created_at DESC);

CREATE INDEX idx_chat_message_deleted 
ON ChatMessage(is_deleted, deleted_at);

-- Full-Text ì¸ë±ìŠ¤ (ê²€ìƒ‰ìš©)
CREATE FULLTEXT INDEX idx_chat_message_content 
ON ChatMessage(content);
```

### 4. MessageReadStatus (ë©”ì‹œì§€ ì½ìŒ ìƒíƒœ) í…Œì´ë¸”

```sql
CREATE TABLE MessageReadStatus (
    idx BIGINT PRIMARY KEY AUTO_INCREMENT,
    
    -- ê´€ê³„
    message_idx BIGINT NOT NULL,
    user_idx BIGINT NOT NULL,
    
    -- ì½ì€ ì‹œê°„
    read_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    -- ì œì•½ì¡°ê±´
    FOREIGN KEY (message_idx) REFERENCES ChatMessage(idx) ON DELETE CASCADE,
    FOREIGN KEY (user_idx) REFERENCES Users(idx),
    
    -- í•œ ì‚¬ìš©ìëŠ” ê°™ì€ ë©”ì‹œì§€ë¥¼ í•œ ë²ˆë§Œ ì½ìŒ ì²˜ë¦¬
    UNIQUE KEY uk_message_read (message_idx, user_idx)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_read_status_user 
ON MessageReadStatus(user_idx, read_at DESC);

CREATE INDEX idx_read_status_message 
ON MessageReadStatus(message_idx);
```

## ë²”ìš© êµ¬ì¡°ì˜ ì¥ì 

### 1. ë‹¤ì–‘í•œ ì±„íŒ… íƒ€ì… ì§€ì›

**1:1 ì¼ë°˜ ì±„íŒ…:**
```java
Conversation conversation = Conversation.builder()
    .conversationType(ConversationType.DIRECT)
    .title(null)  // 1:1ì€ ì´ë¦„ ì—†ìŒ
    .build();
```

**ê·¸ë£¹ ì±„íŒ… (ì‚°ì±…ëª¨ì„):**
```java
Conversation conversation = Conversation.builder()
    .conversationType(ConversationType.MEETUP)
    .title("ê°•ë‚¨ ì‚°ì±… ëª¨ì„")
    .relatedType(RelatedType.MEETUP)
    .relatedIdx(meetupId)
    .build();
```

**í«ì¼€ì–´ ìš”ì²­ ì±„íŒ…:**
```java
Conversation conversation = Conversation.builder()
    .conversationType(ConversationType.CARE_REQUEST)
    .title(null)
    .relatedType(RelatedType.CARE_APPLICATION)
    .relatedIdx(careApplicationId)
    .build();
```

### 2. ì°¸ì—¬ì ê¸°ë°˜ ê´€ë¦¬

**ì±„íŒ…ë°© ì°¸ì—¬:**
```java
ConversationParticipant participant = ConversationParticipant.builder()
    .conversation(conversation)
    .user(user)
    .role(ParticipantRole.MEMBER)
    .status(ParticipantStatus.ACTIVE)
    .unreadCount(0)
    .build();
```

**ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ:**
```java
@Query("SELECT c FROM Conversation c " +
       "INNER JOIN ConversationParticipant p ON c.idx = p.conversation.idx " +
       "WHERE p.user.idx = :userId " +
       "  AND p.status = 'ACTIVE' " +
       "  AND c.status = 'ACTIVE' " +
       "  AND c.isDeleted = false " +
       "ORDER BY c.lastMessageAt DESC")
List<Conversation> findMyConversations(@Param("userId") Long userId);
```

### 3. ì°¸ì—¬ìë³„ ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜

**ë©”ì‹œì§€ ì „ì†¡ ì‹œ:**
```java
@Transactional
public ChatMessage sendMessage(Long conversationIdx, Long senderIdx, String content) {
    ChatMessage message = chatMessageRepository.save(...);
    
    // ì°¸ì—¬ìë“¤ì˜ ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ì¦ê°€
    List<ConversationParticipant> participants = participantRepository
        .findByConversationIdxAndStatus(conversationIdx, ParticipantStatus.ACTIVE);
    
    for (ConversationParticipant p : participants) {
        if (!p.getUser().getIdx().equals(senderIdx)) {
            p.incrementUnreadCount();
            participantRepository.save(p);
        }
    }
    
    // Conversation ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
    conversation.setLastMessageAt(LocalDateTime.now());
    conversation.setLastMessagePreview(content.substring(0, Math.min(200, content.length())));
    conversationRepository.save(conversation);
    
    return message;
}
```

**ë©”ì‹œì§€ ì½ìŒ ì²˜ë¦¬:**
```java
@Transactional
public void markAsRead(Long conversationIdx, Long userId, Long lastMessageIdx) {
    ConversationParticipant participant = participantRepository
        .findByConversationIdxAndUserIdx(conversationIdx, userId)
        .orElseThrow();
    
    // ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ì´ˆê¸°í™”
    participant.setUnreadCount(0);
    participant.setLastReadMessageIdx(lastMessageIdx);
    participant.setLastReadAt(LocalDateTime.now());
    participantRepository.save(participant);
    
    // MessageReadStatus ê¸°ë¡ (ì„ íƒì‚¬í•­)
    if (lastMessageIdx != null) {
        MessageReadStatus readStatus = MessageReadStatus.builder()
            .message(chatMessageRepository.findById(lastMessageIdx).orElseThrow())
            .user(usersRepository.findById(userId).orElseThrow())
            .build();
        messageReadStatusRepository.save(readStatus);
    }
}
```

### 4. ë‹¤ì–‘í•œ ë„ë©”ì¸ ì—°ê²° ì˜ˆì‹œ

**ì‹¤ì¢…ì œë³´ ì±„íŒ…:**
```java
Conversation conversation = Conversation.builder()
    .conversationType(ConversationType.MISSING_PET)
    .relatedType(RelatedType.MISSING_PET_BOARD)
    .relatedIdx(missingPetBoardId)
    .build();
```

**ê´€ë¦¬ì ì§€ì› ì±„íŒ…:**
```java
Conversation conversation = Conversation.builder()
    .conversationType(ConversationType.ADMIN_SUPPORT)
    .relatedType(RelatedType.USER)
    .relatedIdx(userId)
    .build();
```

## ë‘ ë°©ì•ˆ ë¹„êµ

| í•­ëª© | ë°©ì•ˆ 1 (ì „ìš©) | ë°©ì•ˆ 2 (ë²”ìš©) |
|------|--------------|--------------|
| êµ¬í˜„ ë³µì¡ë„ | â­â­ ê°„ë‹¨ | â­â­â­â­ ë³µì¡ |
| í™•ì¥ì„± | âŒ ë‚®ìŒ | âœ… ë†’ìŒ |
| ê·¸ë£¹ ì±„íŒ… | âŒ ë¶ˆê°€ëŠ¥ | âœ… ê°€ëŠ¥ |
| ë‹¤ì–‘í•œ ë„ë©”ì¸ | âŒ ì–´ë ¤ì›€ | âœ… ì‰¬ì›€ |
| ì„±ëŠ¥ | â­â­â­â­ ë¹ ë¦„ | â­â­â­ ë¹ ë¦„ |
| ìœ ì§€ë³´ìˆ˜ | â­â­â­â­ ì‰¬ì›€ | â­â­â­ ë³´í†µ |

## ê¶Œì¥ ì‚¬í•­

### ì´ˆê¸° êµ¬í˜„: ë°©ì•ˆ 1 (ì „ìš©)
- í«ì¼€ì–´ë§Œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
- ë¹ ë¥¸ êµ¬í˜„ í•„ìš”
- ê°„ë‹¨í•œ ìš”êµ¬ì‚¬í•­

### í™•ì¥ ê°€ëŠ¥: ë°©ì•ˆ 2 (ë²”ìš©) â­
- ë‹¤ì–‘í•œ ì±„íŒ… íƒ€ì… í•„ìš”
- ê·¸ë£¹ ì±„íŒ… í•„ìš”
- í–¥í›„ í™•ì¥ ì˜ˆìƒ
- **ê¶Œì¥: ì´ˆê¸°ë¶€í„° ë²”ìš© êµ¬ì¡°ë¡œ ì„¤ê³„**

## ë²”ìš© êµ¬ì¡°ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜

ê¸°ì¡´ ë°©ì•ˆ 1ì—ì„œ ë°©ì•ˆ 2ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ëŠ” ë°©ë²•:

1. **Conversation í…Œì´ë¸” ìˆ˜ì •**
   - `requester_idx`, `provider_idx` â†’ `ConversationParticipant`ë¡œ ì´ë™
   - `conversation_type`, `related_type`, `related_idx` ì¶”ê°€

2. **ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜**
   ```sql
   -- ê¸°ì¡´ ë°ì´í„°ë¥¼ ìƒˆë¡œìš´ êµ¬ì¡°ë¡œ ë³€í™˜
   INSERT INTO ConversationParticipant (conversation_idx, user_idx, role, status)
   SELECT idx, requester_idx, 'MEMBER', 'ACTIVE' FROM Conversation
   UNION ALL
   SELECT idx, provider_idx, 'MEMBER', 'ACTIVE' FROM Conversation;
   ```

3. **ê¸°ì¡´ ì»¬ëŸ¼ ì œê±°**
   - `requester_idx`, `provider_idx` ì œê±°
   - `requester_unread_count`, `provider_unread_count` ì œê±°

## ì£¼ìš” ê°œì„  ì‚¬í•­

### 1. CareApplicationê³¼ì˜ ì—°ê²°
- `care_application_idx` ì¶”ê°€ë¡œ 1:1 ê´€ê³„ ëª…í™•í™”
- ì§€ì›í•˜ê¸° â†’ CareApplication ìƒì„± â†’ Conversation ìƒì„± í”Œë¡œìš° ë°˜ì˜

### 2. Soft Delete íŒ¨í„´ ì ìš©
- ê¸°ì¡´ í”„ë¡œì íŠ¸ íŒ¨í„´ê³¼ ì¼ì¹˜ (`is_deleted`, `deleted_at`)
- Conversationê³¼ ChatMessage ëª¨ë‘ soft delete ì§€ì›

### 3. ë©”íƒ€ë°ì´í„° ì¶”ê°€
- `last_message_at`: ì±„íŒ…ë°© ëª©ë¡ ì •ë ¬ ìµœì í™”
- `last_message_preview`: ëª©ë¡ì—ì„œ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
- ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜: ConversationParticipant í…Œì´ë¸”ì— ì €ì¥ (DB ì¡°íšŒ ìµœì í™”)

### 4. ì½ìŒ ì²˜ë¦¬ ê°œì„ 
- `is_read`: ì½ìŒ ì—¬ë¶€
- `read_at`: ì½ì€ ì‹œê°„ ê¸°ë¡

### 5. íƒ€ì„ìŠ¤íƒ¬í”„
- `created_at`, `updated_at`: ê¸°ì¡´ íŒ¨í„´ê³¼ ì¼ì¹˜

### 6. ì¸ë±ìŠ¤ ì „ëµ
- ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ ìµœì í™” (ì‚¬ìš©ìë³„, ìƒíƒœë³„, ìµœì‹ ìˆœ)
- ë©”ì‹œì§€ ì¡°íšŒ ìµœì í™” (ì±„íŒ…ë°©ë³„, ì‹œê°„ìˆœ)
- ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ì¡°íšŒ ìµœì í™”

## ë‹¤ë¥¸ í…Œì´ë¸”ê³¼ì˜ ì—°ë™

### 1. File í…Œì´ë¸” í™•ì¥

```sql
-- FileTargetType ENUMì— ì¶”ê°€ í•„ìš”
-- CHAT_MESSAGE ì¶”ê°€

-- ì˜ˆì‹œ: ì±„íŒ… ë©”ì‹œì§€ì— ì´ë¯¸ì§€ ì²¨ë¶€
-- attachment_file í…Œì´ë¸”ì—:
-- target_type = 'CHAT_MESSAGE'
-- target_idx = chat_message.idx
```

### 2. Notification í…Œì´ë¸”

```sql
-- NotificationType ENUMì— ì¶”ê°€ í•„ìš”
-- CHAT_MESSAGE ì¶”ê°€

-- ì˜ˆì‹œ: ìƒˆ ë©”ì‹œì§€ ì•Œë¦¼
-- type = 'CHAT_MESSAGE'
-- related_id = chat_message.idx
-- related_type = 'CHAT_MESSAGE'
```

## ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³ ë ¤ì‚¬í•­

### 1. ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ê´€ë¦¬

**ë°©ë²• 1: ì‹¤ì‹œê°„ ê³„ì‚° (ì´ˆê¸° êµ¬í˜„)**
```java
// Conversation ì¡°íšŒ ì‹œ ê³„ì‚°
int unreadCount = chatMessageRepository.countByConversationAndIsReadFalse(conversation);
```

**ë°©ë²• 2: Conversation í…Œì´ë¸”ì— ì €ì¥ (ê¶Œì¥)**
```java
// ë©”ì‹œì§€ ì „ì†¡ ì‹œ ì—…ë°ì´íŠ¸
@Transactional
public ChatMessage sendMessage(Long conversationIdx, Long senderIdx, String content) {
    ChatMessage message = chatMessageRepository.save(...);
    
    // ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ì¦ê°€
    Conversation conversation = conversationRepository.findById(conversationIdx);
    if (senderIdx.equals(conversation.getRequesterIdx())) {
        conversation.incrementProviderUnreadCount();
    } else {
        conversation.incrementRequesterUnreadCount();
    }
    conversation.setLastMessageAt(message.getCreatedAt());
    conversation.setLastMessagePreview(content.substring(0, Math.min(200, content.length())));
    conversationRepository.save(conversation);
    
    return message;
}

// ë©”ì‹œì§€ ì½ìŒ ì²˜ë¦¬ ì‹œ
@Transactional
public void markAsRead(Long conversationIdx, Long readerIdx) {
    // ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ëª¨ë‘ ì½ìŒ ì²˜ë¦¬
    chatMessageRepository.markAsRead(conversationIdx, readerIdx);
    
    // ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ì´ˆê¸°í™”
    Conversation conversation = conversationRepository.findById(conversationIdx);
    if (readerIdx.equals(conversation.getRequesterIdx())) {
        conversation.setRequesterUnreadCount(0);
    } else {
        conversation.setProviderUnreadCount(0);
    }
    conversationRepository.save(conversation);
}
```

### 2. Conversation ìƒì„± í”Œë¡œìš°

```java
@Transactional
public CareApplication createApplication(Long careRequestId, Long applicantId, String message) {
    // 1. CareApplication ìƒì„±
    CareApplication application = CareApplication.builder()
        .careRequest(careRequest)
        .applicant(applicant)
        .message(message)
        .status(CareApplicationStatus.PENDING)
        .build();
    application = careApplicationRepository.save(application);
    
    // 2. Conversation ìƒì„±
    Conversation conversation = Conversation.builder()
        .careRequest(careRequest)
        .careApplication(application)
        .requesterIdx(careRequest.getUser().getIdx())
        .providerIdx(applicant.getIdx())
        .status(ConversationStatus.ACTIVE)
        .build();
    conversationRepository.save(conversation);
    
    // 3. ì•Œë¦¼ ë°œì†¡
    notificationService.createNotification(...);
    
    return application;
}
```

### 3. ë©”ì‹œì§€ ì‚­ì œ (Soft Delete)

```java
@Transactional
public void deleteMessage(Long messageIdx, Long userId) {
    ChatMessage message = chatMessageRepository.findById(messageIdx)
        .orElseThrow();
    
    // ë³¸ì¸ ë©”ì‹œì§€ë§Œ ì‚­ì œ ê°€ëŠ¥
    if (!message.getSenderIdx().equals(userId)) {
        throw new IllegalArgumentException("ë³¸ì¸ ë©”ì‹œì§€ë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
    }
    
    // Soft Delete
    message.setIsDeleted(true);
    message.setDeletedAt(LocalDateTime.now());
    chatMessageRepository.save(message);
}
```

## ì„±ëŠ¥ ìµœì í™”

### 1. ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ê´€ë¦¬
- Conversation í…Œì´ë¸”ì— ì €ì¥í•˜ì—¬ JOIN ì—†ì´ ì¡°íšŒ ê°€ëŠ¥
- ë©”ì‹œì§€ ì „ì†¡/ì½ìŒ ì‹œì—ë§Œ ì—…ë°ì´íŠ¸

### 2. ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ
```sql
-- ì¸ë±ìŠ¤ í™œìš©
SELECT * FROM Conversation
WHERE requester_idx = ? OR provider_idx = ?
  AND status = 'ACTIVE'
  AND is_deleted = FALSE
ORDER BY last_message_at DESC;
```

### 3. ë©”ì‹œì§€ ì¡°íšŒ (í˜ì´ì§•)
```sql
-- ì»¤ì„œ ê¸°ë°˜ í˜ì´ì§• (ê¶Œì¥)
SELECT * FROM ChatMessage
WHERE conversation_idx = ?
  AND is_deleted = FALSE
  AND created_at < ?
ORDER BY created_at DESC
LIMIT 50;
```

## ì‚¬ìš©ì íƒˆí‡´ ì²˜ë¦¬ ì „ëµ

### ë¬¸ì œ ìƒí™©
- ì‚¬ìš©ìê°€ íƒˆí‡´(`users.is_deleted = true`)í•  ë•Œ ì±„íŒ… ê´€ë ¨ ë°ì´í„° ì²˜ë¦¬ í•„ìš”
- ì±„íŒ… íˆìŠ¤í† ë¦¬ëŠ” ë³´ì¡´í•´ì•¼ í•˜ì§€ë§Œ, íƒˆí‡´í•œ ì‚¬ìš©ì ì •ë³´ëŠ” í‘œì‹œí•˜ì§€ ì•Šì•„ì•¼ í•¨
- FK ì œì•½ì¡°ê±´ ë•Œë¬¸ì— ì™„ì „ ì‚­ì œëŠ” ë¶ˆê°€ëŠ¥ (soft delete ë°©ì‹)

### í•´ê²° ë°©ì•ˆ

#### 1. FK ì œì•½ì¡°ê±´ ìœ ì§€ (Soft Delete ë°©ì‹)

```sql
-- FKëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ (ON DELETE ì œì•½ ì—†ìŒ)
FOREIGN KEY (requester_idx) REFERENCES Users(idx),
FOREIGN KEY (provider_idx) REFERENCES Users(idx),
FOREIGN KEY (sender_idx) REFERENCES Users(idx)

-- ì´ìœ : 
-- - Users í…Œì´ë¸”ì´ soft deleteì´ë¯€ë¡œ ì‹¤ì œë¡œ ì‚­ì œë˜ì§€ ì•ŠìŒ
-- - FK ì œì•½ì¡°ê±´ì€ ìœ ì§€ë˜ì§€ë§Œ ë°ì´í„°ëŠ” ë³´ì¡´ë¨
```

#### 2. ì¡°íšŒ ì‹œ íƒˆí‡´í•œ ì‚¬ìš©ì í•„í„°ë§

**ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ:**
```java
// íƒˆí‡´í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ì±„íŒ…ë°©ë§Œ ì¡°íšŒ
@Query("SELECT c FROM Conversation c " +
       "JOIN Users requester ON c.requesterIdx = requester.idx " +
       "JOIN Users provider ON c.providerIdx = provider.idx " +
       "WHERE (c.requesterIdx = :userId OR c.providerIdx = :userId) " +
       "  AND requester.isDeleted = false " +
       "  AND provider.isDeleted = false " +
       "  AND c.status = 'ACTIVE' " +
       "  AND c.isDeleted = false " +
       "ORDER BY c.lastMessageAt DESC")
List<Conversation> findActiveConversationsByUser(@Param("userId") Long userId);
```

**ë©”ì‹œì§€ ì¡°íšŒ:**
```java
// ë©”ì‹œì§€ëŠ” ê·¸ëŒ€ë¡œ ì¡°íšŒí•˜ë˜, íƒˆí‡´í•œ ì‚¬ìš©ìëŠ” "íƒˆí‡´í•œ ì‚¬ìš©ì"ë¡œ í‘œì‹œ
public ChatMessageDTO toDTO(ChatMessage message) {
    Users sender = message.getSender();
    ChatMessageDTO dto = new ChatMessageDTO();
    
    if (sender.getIsDeleted()) {
        // íƒˆí‡´í•œ ì‚¬ìš©ì ì²˜ë¦¬
        dto.setSenderName("íƒˆí‡´í•œ ì‚¬ìš©ì");
        dto.setSenderProfileImage(null);
        dto.setIsDeletedSender(true);
    } else {
        dto.setSenderName(sender.getUsername());
        dto.setSenderProfileImage(sender.getProfileImageUrl());
        dto.setIsDeletedSender(false);
    }
    
    dto.setContent(message.getContent());
    dto.setCreatedAt(message.getCreatedAt());
    return dto;
}
```

#### 3. íƒˆí‡´í•œ ì‚¬ìš©ìì˜ ì±„íŒ…ë°© ìˆ¨ê¹€

**Conversation ì¡°íšŒ ë¡œì§:**
```java
// íƒˆí‡´í•œ ì‚¬ìš©ìê°€ í¬í•¨ëœ ì±„íŒ…ë°©ì€ ì¡°íšŒì—ì„œ ì œì™¸
public List<ConversationDTO> getMyConversations(Long userId) {
    // 1. í˜„ì¬ ì‚¬ìš©ìê°€ ì°¸ì—¬í•˜ëŠ” ì±„íŒ…ë°© ì¡°íšŒ
    List<Conversation> conversations = conversationRepository
        .findByRequesterIdxOrProviderIdx(userId, userId);
    
    // 2. íƒˆí‡´í•œ ì‚¬ìš©ìê°€ í¬í•¨ëœ ì±„íŒ…ë°© ì œì™¸
    return conversations.stream()
        .filter(conv -> {
            Users requester = usersRepository.findById(conv.getRequesterIdx()).orElse(null);
            Users provider = usersRepository.findById(conv.getProviderIdx()).orElse(null);
            
            // ë‘˜ ë‹¤ íƒˆí‡´í•˜ì§€ ì•Šì•˜ê±°ë‚˜, ë‚´ê°€ íƒˆí‡´í•˜ì§€ ì•Šì€ ê²½ìš°ë§Œ
            boolean requesterActive = requester != null && !requester.getIsDeleted();
            boolean providerActive = provider != null && !provider.getIsDeleted();
            boolean iAmActive = (conv.getRequesterIdx().equals(userId) && requesterActive) ||
                               (conv.getProviderIdx().equals(userId) && providerActive);
            
            return requesterActive && providerActive && iAmActive;
        })
        .map(this::toDTO)
        .collect(Collectors.toList());
}
```

#### 4. ë©”ì‹œì§€ ì „ì†¡ ì‹œ íƒˆí‡´ ì²´í¬

```java
// ë©”ì‹œì§€ ì „ì†¡ ì‹œ
@Transactional
public ChatMessage sendMessage(Long conversationIdx, Long senderIdx, String content) {
    // 1. ì „ì†¡ìê°€ íƒˆí‡´í–ˆëŠ”ì§€ í™•ì¸
    Users sender = usersRepository.findById(senderIdx)
        .orElseThrow(() -> new IllegalArgumentException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
    
    if (sender.getIsDeleted()) {
        throw new IllegalStateException("íƒˆí‡´í•œ ì‚¬ìš©ìëŠ” ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    }
    
    Conversation conversation = conversationRepository.findById(conversationIdx)
        .orElseThrow();
    
    // 2. ì±„íŒ…ë°©ì˜ ë‹¤ë¥¸ ì‚¬ìš©ìê°€ íƒˆí‡´í–ˆëŠ”ì§€ í™•ì¸
    Long receiverIdx = conversation.getRequesterIdx().equals(senderIdx) 
        ? conversation.getProviderIdx() 
        : conversation.getRequesterIdx();
    
    Users receiver = usersRepository.findById(receiverIdx).orElse(null);
    
    if (receiver == null || receiver.getIsDeleted()) {
        throw new IllegalStateException("ëŒ€í™” ìƒëŒ€ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ íƒˆí‡´í–ˆìŠµë‹ˆë‹¤.");
    }
    
    // 3. ë©”ì‹œì§€ ì €ì¥
    ChatMessage message = chatMessageRepository.save(
        ChatMessage.builder()
            .conversation(conversation)
            .sender(sender)
            .content(content)
            .isRead(false)
            .build()
    );
    
    // 4. Conversation ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
    conversation.setLastMessageAt(LocalDateTime.now());
    conversation.setLastMessagePreview(content.substring(0, Math.min(200, content.length())));
    
    if (senderIdx.equals(conversation.getRequesterIdx())) {
        conversation.incrementProviderUnreadCount();
    } else {
        conversation.incrementRequesterUnreadCount();
    }
    conversationRepository.save(conversation);
    
    // 5. íƒˆí‡´í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì—ê²Œë§Œ ì•Œë¦¼ ë°œì†¡
    notificationService.createNotification(
        receiverIdx,
        NotificationType.CHAT_MESSAGE,
        "ìƒˆ ë©”ì‹œì§€ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤",
        message.getContent(),
        conversationIdx,
        "CONVERSATION"
    );
    
    return message;
}
```

#### 5. íƒˆí‡´ ì‹œ ì±„íŒ…ë°© ìë™ ë¹„í™œì„±í™” (ì„ íƒì‚¬í•­)

```java
// ì‚¬ìš©ì íƒˆí‡´ ì²˜ë¦¬ ì‹œ
@Transactional
public void deactivateUserConversations(Long userId) {
    // í•´ë‹¹ ì‚¬ìš©ìê°€ ì°¸ì—¬í•˜ëŠ” ëª¨ë“  ì±„íŒ…ë°© ë¹„í™œì„±í™”
    List<Conversation> conversations = conversationRepository
        .findByRequesterIdxOrProviderIdx(userId, userId);
    
    for (Conversation conv : conversations) {
        conv.setStatus(ConversationStatus.CLOSED);
        conversationRepository.save(conv);
    }
}
```

### ì¿¼ë¦¬ ìµœì í™”

**íƒˆí‡´í•œ ì‚¬ìš©ì ì²´í¬ë¥¼ JOINìœ¼ë¡œ ì²˜ë¦¬:**
```sql
-- ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ (íƒˆí‡´í•œ ì‚¬ìš©ì ì œì™¸)
SELECT c.* 
FROM Conversation c
INNER JOIN Users requester ON c.requester_idx = requester.idx
INNER JOIN Users provider ON c.provider_idx = provider.idx
WHERE (c.requester_idx = ? OR c.provider_idx = ?)
  AND requester.is_deleted = FALSE
  AND provider.is_deleted = FALSE
  AND c.status = 'ACTIVE'
  AND c.is_deleted = FALSE
ORDER BY c.last_message_at DESC;
```

**ì¸ë±ìŠ¤ ì¶”ê°€:**
```sql
-- íƒˆí‡´ ì²´í¬ ìµœì í™”
CREATE INDEX idx_users_deleted ON Users(is_deleted, idx);
```

### ìš”ì•½

âœ… **FK ì œì•½ì¡°ê±´ ìœ ì§€**: Soft delete ë°©ì‹ì´ë¯€ë¡œ ì‹¤ì œ ì‚­ì œë˜ì§€ ì•Šì•„ FK ë¬¸ì œ ì—†ìŒ
âœ… **ì¡°íšŒ ì‹œ í•„í„°ë§**: íƒˆí‡´í•œ ì‚¬ìš©ì í¬í•¨ ì±„íŒ…ë°©ì€ ëª©ë¡ì—ì„œ ì œì™¸
âœ… **ë©”ì‹œì§€ í‘œì‹œ**: íƒˆí‡´í•œ ì‚¬ìš©ì ë©”ì‹œì§€ëŠ” "íƒˆí‡´í•œ ì‚¬ìš©ì"ë¡œ í‘œì‹œ
âœ… **ë©”ì‹œì§€ ì „ì†¡ ì°¨ë‹¨**: íƒˆí‡´í•œ ì‚¬ìš©ìëŠ” ë©”ì‹œì§€ ì „ì†¡ ë¶ˆê°€
âœ… **ì•Œë¦¼ ì°¨ë‹¨**: íƒˆí‡´í•œ ì‚¬ìš©ìì—ê²ŒëŠ” ì•Œë¦¼ ë°œì†¡ ì•ˆ í•¨
âœ… **ì±„íŒ…ë°© ìë™ ë¹„í™œì„±í™”**: íƒˆí‡´ ì‹œ ê´€ë ¨ ì±„íŒ…ë°© CLOSED ì²˜ë¦¬ (ì„ íƒ)

### êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] FK ì œì•½ì¡°ê±´ì—ì„œ ON DELETE ì˜µì…˜ ëª…ì‹œí•˜ì§€ ì•Šê¸° (soft delete ìœ ì§€)
- [ ] ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ ì‹œ íƒˆí‡´í•œ ì‚¬ìš©ì í•„í„°ë§ (JOINìœ¼ë¡œ ì²˜ë¦¬)
- [ ] ë©”ì‹œì§€ DTO ë³€í™˜ ì‹œ íƒˆí‡´í•œ ì‚¬ìš©ì ì²´í¬ ë° "íƒˆí‡´í•œ ì‚¬ìš©ì" í‘œì‹œ
- [ ] ë©”ì‹œì§€ ì „ì†¡ ì‹œ ì „ì†¡ì/ìˆ˜ì‹ ì íƒˆí‡´ ì—¬ë¶€ ì²´í¬
- [ ] ì•Œë¦¼ ë°œì†¡ ì‹œ ìˆ˜ì‹ ì íƒˆí‡´ ì—¬ë¶€ ì²´í¬
- [ ] ì‚¬ìš©ì íƒˆí‡´ ì‹œ ê´€ë ¨ ì±„íŒ…ë°© ìë™ ë¹„í™œì„±í™” (ì„ íƒ)
- [ ] ì¸ë±ìŠ¤ ì¶”ê°€: `idx_users_deleted` (ì„±ëŠ¥ ìµœì í™”)

## ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### ì„ íƒì‚¬í•­ (í–¥í›„ êµ¬í˜„)

1. **ë©”ì‹œì§€ íƒ€ì… í™•ì¥**
   ```sql
   -- ChatMessageì— ì¶”ê°€ ê°€ëŠ¥
   message_type ENUM('TEXT', 'IMAGE', 'FILE', 'SYSTEM') DEFAULT 'TEXT'
   ```

2. **ì½ìŒ í™•ì¸ (Read Receipt)**
   - í˜„ì¬: `is_read`, `read_at`ìœ¼ë¡œ ê¸°ë³¸ êµ¬í˜„
   - í–¥í›„: ì‹¤ì‹œê°„ ì½ìŒ í™•ì¸ (WebSocket)

3. **ì±„íŒ…ë°© ë‚˜ê°€ê¸°** âœ… **êµ¬í˜„ ì™„ë£Œ**
   - âœ… `ConversationParticipant.status = LEFT`, `isDeleted = true`, `deletedAt` ì„¤ì •
   - âœ… `Conversation.isDeleted = true`, `deletedAt` ì„¤ì • (ì‚­ì œ ì‹œ)
   - âœ… í”„ë¡ íŠ¸ì—”ë“œ UI: í—¤ë” ë©”ë‰´ì—ì„œ ë‚˜ê°€ê¸°/ì‚­ì œ ì˜µì…˜ ì œê³µ

4. **ë©”ì‹œì§€ ê²€ìƒ‰**
   ```sql
   -- Full-Text ì¸ë±ìŠ¤
   CREATE FULLTEXT INDEX idx_chat_message_content 
   ON ChatMessage(content);
   ```

5. **ëŒ€í™”ë°© ì•„ì¹´ì´ë¹™**
   - ì˜¤ë˜ëœ ëŒ€í™”ë°© ìë™ ì•„ì¹´ì´ë¹™
   - ì½ì€ ë©”ì‹œì§€ë§Œ ë³´ê´€ (ë¯¸ì½ìŒ ë©”ì‹œì§€ëŠ” ìœ ì§€)

---

## êµ¬í˜„ í˜„í™© ë° ë³€ê²½ì‚¬í•­

> ì´ ì„¹ì…˜ì€ ì‹¤ì œ êµ¬í˜„ê³¼ ì„¤ê³„ ë¬¸ì„œ ê°„ì˜ ì°¨ì´ì  ë° ì¶”ê°€/ë³€ê²½ëœ ì‚¬í•­ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

### âœ… ì„¤ê³„ ë¬¸ì„œì— ì—†ì§€ë§Œ êµ¬í˜„ëœ ê¸°ëŠ¥

#### 1. ì±„íŒ…ë°© ë‚˜ê°€ê¸°/ì‚­ì œ ê¸°ëŠ¥ â­
**ì„¤ê³„ ë¬¸ì„œ**: "ì„ íƒì‚¬í•­ (í–¥í›„ êµ¬í˜„)"ìœ¼ë¡œë§Œ ì–¸ê¸‰ (1331-1333ì¤„)

**ì‹¤ì œ êµ¬í˜„**:
- âœ… **ì±„íŒ…ë°© ë‚˜ê°€ê¸°**: `ConversationParticipant`ì˜ `status = LEFT`, `isDeleted = true`, `deletedAt` ì„¤ì •
- âœ… **ì±„íŒ…ë°© ì‚­ì œ**: `Conversation`ì˜ `isDeleted = true`, `deletedAt` ì„¤ì •
- âœ… **í”„ë¡ íŠ¸ì—”ë“œ UI**: í—¤ë”ì— ë©”ë‰´ ë²„íŠ¼(â‹®) ì¶”ê°€, ë“œë¡­ë‹¤ìš´ ë©”ë‰´ë¡œ ë‚˜ê°€ê¸°/ì‚­ì œ ì˜µì…˜ ì œê³µ
- âœ… **Soft Delete íŒ¨í„´**: í”„ë¡œì íŠ¸ ì „ë°˜ì˜ íŒ¨í„´ê³¼ ì¼ì¹˜í•˜ë„ë¡ êµ¬í˜„

**êµ¬í˜„ ìœ„ì¹˜**:
- ë°±ì—”ë“œ: `ConversationService.leaveConversation()`, `deleteConversation()`
- í”„ë¡ íŠ¸ì—”ë“œ: `ChatRoom.js` - `handleLeaveConversation()`, `handleDeleteConversation()`

#### 2. ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ â­
**ì„¤ê³„ ë¬¸ì„œ**: í”Œë¡œìš°ëŠ” ì„¤ëª…ë˜ì–´ ìˆì§€ë§Œ (288-314ì¤„), ì‹¤ì œ êµ¬í˜„ ì—¬ë¶€ëŠ” ëª…ì‹œë˜ì§€ ì•ŠìŒ

**ì‹¤ì œ êµ¬í˜„**:
- âœ… **ì´ë¯¸ì§€ ì—…ë¡œë“œ ë²„íŠ¼**: ì±„íŒ… ì…ë ¥ì°½ì— ì´ë¯¸ì§€ ì—…ë¡œë“œ ë²„íŠ¼(ğŸ“·) ì¶”ê°€
- âœ… **ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°**: ì—…ë¡œë“œëœ ì´ë¯¸ì§€ë¥¼ ì±„íŒ…ë°©ì—ì„œ í‘œì‹œ
- âœ… **ì´ë¯¸ì§€ í™•ëŒ€**: ì´ë¯¸ì§€ í´ë¦­ ì‹œ ëª¨ë‹¬ë¡œ í™•ëŒ€ í‘œì‹œ
- âœ… **WebSocket ì—°ë™**: ì´ë¯¸ì§€ ë©”ì‹œì§€ë„ WebSocketì„ í†µí•´ ì‹¤ì‹œê°„ ì „ì†¡

**êµ¬í˜„ ìœ„ì¹˜**:
- í”„ë¡ íŠ¸ì—”ë“œ: `ChatRoom.js` - `handleImageUpload()`, `ImagePreviewModal`
- ë°±ì—”ë“œ: `ChatWebSocketController` - `IMAGE` íƒ€ì… ë©”ì‹œì§€ ì²˜ë¦¬

#### 3. UI/UX ê°œì„  ì‚¬í•­

**3.1 ë§í’ì„  ìŠ¤íƒ€ì¼**
- âœ… **ë§í’ì„  ë””ìì¸**: ë‚´ ë©”ì‹œì§€ì™€ ìƒëŒ€ë°© ë©”ì‹œì§€ êµ¬ë¶„
- âœ… **ë§í’ì„  ê¼¬ë¦¬**: `::after`ë¥¼ ì‚¬ìš©í•œ ë§í’ì„  ê¼¬ë¦¬ íš¨ê³¼
- âœ… **ê·¸ë¦¼ì íš¨ê³¼**: `box-shadow`ë¡œ ì…ì²´ê° ì¶”ê°€
- âœ… **ìƒ‰ìƒ êµ¬ë¶„**: ë‚´ ë©”ì‹œì§€ëŠ” primary ìƒ‰ìƒ, ìƒëŒ€ë°© ë©”ì‹œì§€ëŠ” íšŒìƒ‰ ë°°ê²½

**3.2 ë©”ì‹œì§€ ì…ë ¥ì°½ ìë™ í¬ì»¤ìŠ¤**
- âœ… ì±„íŒ…ë°© ì§„ì… ì‹œ ë©”ì‹œì§€ ì…ë ¥ì°½ì— ìë™ í¬ì»¤ìŠ¤
- âœ… ë©”ì‹œì§€ ì „ì†¡ í›„ ìë™ìœ¼ë¡œ ë‹¤ì‹œ í¬ì»¤ìŠ¤

**3.3 ë©”ì‹œì§€ ìˆœì„œ ë° ìŠ¤í¬ë¡¤**
- âœ… ìµœì‹  ë©”ì‹œì§€ê°€ ë§¨ ì•„ë˜ì— í‘œì‹œë˜ë„ë¡ ì •ë ¬
- âœ… ìƒˆ ë©”ì‹œì§€ ìˆ˜ì‹  ì‹œ ìë™ìœ¼ë¡œ ë§¨ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤
- âœ… ë°±ì—”ë“œì—ì„œ DESCë¡œ ë°›ì€ ë©”ì‹œì§€ë¥¼ reverse()í•˜ì—¬ ì˜¤ë˜ëœ ê²ƒë¶€í„° ìµœì‹  ìˆœì„œë¡œ í‘œì‹œ

**3.4 ìƒëŒ€ë°© ì´ë¦„ í‘œì‹œ**
- âœ… ìƒëŒ€ë°© ë©”ì‹œì§€ ìœ„ì— `senderUsername` í‘œì‹œ
- âœ… "ì•Œ ìˆ˜ ì—†ìŒ" ëŒ€ì‹  ì‹¤ì œ username í‘œì‹œ

**3.5 ì±„íŒ…ë°© í—¤ë”**
- âœ… ì±„íŒ…ë°© íƒ€ì…ë³„ ì œëª© í‘œì‹œ (ì‹¤ì¢…ì œë³´ ì±„íŒ…, ì¼€ì–´ ìš”ì²­ ì±„íŒ… ë“±)
- âœ… ìƒëŒ€ë°© ì´ë¦„ ë° ì—°ê²° ìƒíƒœ í‘œì‹œ (ğŸŸ¢ ì—°ê²°ë¨ / ğŸ”´ ì—°ê²° ì¤‘...)
- âœ… ë©”ë‰´ ë²„íŠ¼ (ë‚˜ê°€ê¸°/ì‚­ì œ)

**3.6 ë©”ì‹œì§€ í‘œì‹œ**
- âœ… ë©”ì‹œì§€ íƒ€ì…ë³„ í‘œì‹œ (TEXT, IMAGE)
- âœ… ì‹œê°„ í‘œì‹œ (1ë¶„ ì´ìƒ ê°„ê²©ì¼ ë•Œë§Œ)
- âœ… ë‚´ ë©”ì‹œì§€/ìƒëŒ€ë°© ë©”ì‹œì§€ êµ¬ë¶„

### ğŸ”„ ì„¤ê³„ ë¬¸ì„œì™€ ì¼ì¹˜í•˜ëŠ” êµ¬í˜„

#### 1. WebSocket ì‹¤ì‹œê°„ ì±„íŒ… âœ…
- âœ… SockJS + STOMP í”„ë¡œí† ì½œ ì‚¬ìš©
- âœ… JWT í† í° ì¸ì¦ (ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬)
- âœ… `/topic/conversation/{conversationIdx}` êµ¬ë…
- âœ… `/app/chat.send`ë¡œ ë©”ì‹œì§€ ì „ì†¡
- âœ… ì‹¤ì‹œê°„ ë©”ì‹œì§€ ìˆ˜ì‹  ë° í‘œì‹œ

#### 2. ë©”ì‹œì§€ ì½ìŒ ì²˜ë¦¬ âœ…
- âœ… `markAsRead()` API í˜¸ì¶œ
- âœ… `ConversationParticipant.unreadCount` ê´€ë¦¬
- âœ… `lastReadMessageIdx`, `lastReadAt` ì—…ë°ì´íŠ¸

#### 3. Soft Delete íŒ¨í„´ âœ…
- âœ… `isDeleted`, `deletedAt` í•„ë“œ ì‚¬ìš©
- âœ… ëª¨ë“  ì—”í‹°í‹°ì— ì¼ê´€ë˜ê²Œ ì ìš©

#### 4. ì±„íŒ…ë°© íƒ€ì… ì§€ì› âœ…
- âœ… `DIRECT`, `CARE_REQUEST`, `MISSING_PET`, `MEETUP` ë“± ì§€ì›
- âœ… ë²”ìš© êµ¬ì¡°ë¡œ êµ¬í˜„

### ğŸ“ ì„¤ê³„ ë¬¸ì„œì— ìˆì§€ë§Œ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì€ ê¸°ëŠ¥

#### 1. íƒ€ì´í•‘ í‘œì‹œ (Typing Indicator)
**ì„¤ê³„ ë¬¸ì„œ**: 353-367ì¤„ì— í”Œë¡œìš° ì„¤ëª…

**í˜„ì¬ ìƒíƒœ**: âŒ ë¯¸êµ¬í˜„
- `/app/chat.typing` ì—”ë“œí¬ì¸íŠ¸ëŠ” ìˆì§€ë§Œ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ

#### 2. ë©”ì‹œì§€ ê²€ìƒ‰
**ì„¤ê³„ ë¬¸ì„œ**: 1335-1340ì¤„ì— Full-Text ì¸ë±ìŠ¤ ì–¸ê¸‰

**í˜„ì¬ ìƒíƒœ**: âŒ ë¯¸êµ¬í˜„
- ë°±ì—”ë“œì— `searchMessages()` ë©”ì„œë“œëŠ” ìˆì§€ë§Œ í”„ë¡ íŠ¸ì—”ë“œ UI ì—†ìŒ

#### 3. ë©”ì‹œì§€ ë‹µì¥ ê¸°ëŠ¥ (Reply)
**ì„¤ê³„ ë¬¸ì„œ**: `reply_to_message_idx` í•„ë“œëŠ” ìˆì§€ë§Œ (686ì¤„), UI êµ¬í˜„ ì—†ìŒ

**í˜„ì¬ ìƒíƒœ**: âŒ ë¯¸êµ¬í˜„

#### 4. ì½ìŒ í™•ì¸ (Read Receipt)
**ì„¤ê³„ ë¬¸ì„œ**: 1327-1329ì¤„ì— "ì‹¤ì‹œê°„ ì½ìŒ í™•ì¸ (WebSocket)" ì–¸ê¸‰

**í˜„ì¬ ìƒíƒœ**: âš ï¸ ë¶€ë¶„ êµ¬í˜„
- ê¸°ë³¸ ì½ìŒ ì²˜ë¦¬ëŠ” êµ¬í˜„ë¨
- ì‹¤ì‹œê°„ ì½ìŒ ìƒíƒœ í‘œì‹œëŠ” ë¯¸êµ¬í˜„

#### 5. ëŒ€í™”ë°© ì•„ì¹´ì´ë¹™
**ì„¤ê³„ ë¬¸ì„œ**: 1342-1344ì¤„ì— ì–¸ê¸‰

**í˜„ì¬ ìƒíƒœ**: âŒ ë¯¸êµ¬í˜„

### ğŸ”§ ê¸°ìˆ ì  ì°¨ì´ì 

#### 1. WebSocket ì—°ê²° URL
**ì„¤ê³„ ë¬¸ì„œ**: `ws://localhost:8080/chat` (190ì¤„)

**ì‹¤ì œ êµ¬í˜„**: `http://localhost:8080/ws?token={token}`
- SockJSë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ HTTP ê¸°ë°˜
- í† í°ì„ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬

#### 2. ë©”ì‹œì§€ ì •ë ¬
**ì„¤ê³„ ë¬¸ì„œ**: ëª…ì‹œë˜ì§€ ì•ŠìŒ

**ì‹¤ì œ êµ¬í˜„**:
- ë°±ì—”ë“œ: `DESC` ì •ë ¬ (ìµœì‹ ë¶€í„°)
- í”„ë¡ íŠ¸ì—”ë“œ: `reverse()`í•˜ì—¬ ì˜¤ë˜ëœ ê²ƒë¶€í„° ìµœì‹  ìˆœì„œë¡œ í‘œì‹œ

#### 3. íŒŒì¼ ì—…ë¡œë“œ
**ì„¤ê³„ ë¬¸ì„œ**: `/api/files/upload` (295ì¤„)

**ì‹¤ì œ êµ¬í˜„**: `uploadApi.uploadImage()` ì‚¬ìš©
- ì‹¤ì œ ì—”ë“œí¬ì¸íŠ¸ëŠ” í”„ë¡œì íŠ¸ì˜ íŒŒì¼ ì—…ë¡œë“œ API ì‚¬ìš©

### ğŸ“Š êµ¬í˜„ í˜„í™© ìš”ì•½

#### êµ¬í˜„ ì™„ë£Œ âœ…
1. âœ… ì±„íŒ…ë°© ë‚˜ê°€ê¸°/ì‚­ì œ (ì„¤ê³„ ë¬¸ì„œì—ëŠ” ì„ íƒì‚¬í•­)
2. âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° í‘œì‹œ
3. âœ… ë§í’ì„  ìŠ¤íƒ€ì¼ UI
4. âœ… ë©”ì‹œì§€ ìë™ í¬ì»¤ìŠ¤
5. âœ… ë©”ì‹œì§€ ìˆœì„œ ë° ìŠ¤í¬ë¡¤ ìµœì í™”
6. âœ… WebSocket ì‹¤ì‹œê°„ ì±„íŒ…
7. âœ… ì½ìŒ ì²˜ë¦¬
8. âœ… ìƒëŒ€ë°© ì´ë¦„ í‘œì‹œ
9. âœ… ì±„íŒ…ë°© í—¤ë” UI

#### ë¯¸êµ¬í˜„ âŒ
1. âŒ íƒ€ì´í•‘ í‘œì‹œ
2. âŒ ë©”ì‹œì§€ ê²€ìƒ‰ UI
3. âŒ ë©”ì‹œì§€ ë‹µì¥ ê¸°ëŠ¥
4. âŒ ì‹¤ì‹œê°„ ì½ìŒ í™•ì¸ í‘œì‹œ
5. âŒ ëŒ€í™”ë°© ì•„ì¹´ì´ë¹™

#### ê°œì„  ì‚¬í•­ ğŸ¨
- UI/UXê°€ ì„¤ê³„ ë¬¸ì„œë³´ë‹¤ ë” í’ë¶€í•˜ê²Œ êµ¬í˜„ë¨
- ì‚¬ìš©ì ê²½í—˜ì„ ê³ ë ¤í•œ ì¶”ê°€ ê¸°ëŠ¥ ë‹¤ìˆ˜ êµ¬í˜„
- ì‹¤ì œ êµ¬í˜„ì—ì„œ ë” ë§ì€ ê¸°ëŠ¥ì´ ì™„ì„±ë˜ì–´ ìˆìŒ

