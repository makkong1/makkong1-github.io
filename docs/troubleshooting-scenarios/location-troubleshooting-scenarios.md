# Location 도메인 트러블슈팅 시나리오

## 발생 가능한 문제 상황들

### 1. 지역별 조회 시 대량 데이터 로딩
- **시나리오**: 시도 단위로 조회 시 모든 데이터를 한 번에 로딩
- **재현 방법**: 시도 단위 조회 API 호출 시 응답 시간 측정
- **예상 증상**: 응답 시간 5초 이상, 메모리 사용량 증가

### 2. 카테고리 필터링 성능 저하
- **시나리오**: 지역 조회 후 카테고리 필터링을 메모리에서 수행
- **재현 방법**: 대량 데이터 조회 후 카테고리 필터링
- **예상 증상**: 필터링 응답 시간 증가

### 3. 거리 계산 대량 처리 성능 저하
- **시나리오**: 여러 서비스의 거리를 계산할 때 각 서비스마다 Haversine 공식 계산
- **재현 방법**: 많은 서비스의 거리를 계산할 때
- **예상 증상**: CPU 부하 증가, 응답 시간 증가

### 4. 인기 서비스 조회 시 캐시 미사용
- **시나리오**: 인기 서비스 조회 시 매번 DB 조회
- **재현 방법**: 인기 서비스 조회 API 호출 시 쿼리 확인
- **예상 증상**: 매번 DB 조회 쿼리 발생

### 5. 지역 검색 시 계층 구조 검색 성능 저하
- **시나리오**: 지역 검색 시 계층 구조를 순차적으로 검색
- **재현 방법**: 지역 검색 API 호출 시 쿼리 확인
- **예상 증상**: 여러 쿼리 발생, 응답 시간 증가

### 6. 위치 기반 검색 시 인덱스 미사용
- **시나리오**: 위치 기반 검색 시 위도/경도 인덱스 미사용
- **재현 방법**: 위치 기반 검색 API 호출 시 쿼리 실행 계획 확인
- **예상 증상**: 전체 테이블 스캔, 성능 저하

### 7. 지역 데이터 동기화 문제
- **시나리오**: 지역 데이터 업데이트 시 캐시 미갱신
- **재현 방법**: 지역 데이터 업데이트 후 캐시 확인
- **예상 증상**: 오래된 데이터 조회

### 8. 거리 계산 정확도 문제
- **시나리오**: Haversine 공식 계산 시 반올림 오차 누적
- **재현 방법**: 거리 계산 결과 확인
- **예상 증상**: 거리 계산 결과 부정확

