# Care 도메인 트러블슈팅 시나리오

## 발생 가능한 문제 상황들

### 1. 지원 승인 동시 처리
- **시나리오**: 여러 지원을 동시에 승인하려 할 때
- **재현 방법**: 동시에 여러 지원 승인 API 호출
- **예상 증상**: 1명만 승인되어야 하는데 여러 명이 승인됨

### 2. 펫케어 요청 목록 조회 N+1 문제
- **시나리오**: 펫케어 요청 목록 조회 시 각 요청의 요청자, 펫, 지원자 수를 개별 쿼리로 조회
- **재현 방법**: 펫케어 요청 목록 조회 시 로그 확인
- **예상 증상**: 요청마다 연관 데이터 조회 쿼리 발생

### 3. 펫케어 리뷰 평균 평점 계산 성능 저하
- **시나리오**: 사용자 프로필에서 평균 평점 조회 시 매번 리뷰를 조회하여 평균 계산
- **재현 방법**: 사용자 프로필 조회 시 쿼리 확인
- **예상 증상**: 리뷰 조회 쿼리 발생, 응답 시간 증가

### 4. 스케줄러 중복 실행
- **시나리오**: 여러 인스턴스에서 스케줄러 동시 실행
- **재현 방법**: 여러 서버 인스턴스에서 동시 실행
- **예상 증상**: 같은 작업이 여러 번 실행되어 데이터 중복

### 5. 펫케어 요청 만료 처리 누락
- **시나리오**: 펫케어 요청 만료 시 자동 완료 처리 누락
- **재현 방법**: 만료된 펫케어 요청 확인
- **예상 증상**: 만료된 요청이 계속 RECRUITING 상태로 남아있음

### 6. 펫케어 지원 취소 시 상태 처리 문제
- **시나리오**: 승인된 지원을 취소할 때 요청 상태 미변경
- **재현 방법**: 승인된 지원 취소 후 요청 상태 확인
- **예상 증상**: 요청 상태가 계속 APPROVED로 남아있음

### 7. 펫케어 리뷰 작성 시 중복 체크 누락
- **시나리오**: 같은 펫케어 요청에 대해 여러 리뷰 작성 가능
- **재현 방법**: 같은 요청에 대해 여러 리뷰 작성 시도
- **예상 증상**: 중복 리뷰 작성 가능

### 8. 펫케어 요청 생성 시 펫 정보 검증 누락
- **시나리오**: 펫케어 요청 생성 시 펫이 실제로 존재하는지 확인하지 않음
- **재현 방법**: 존재하지 않는 펫 ID로 요청 생성
- **예상 증상**: 잘못된 펫 정보로 요청 생성 가능

