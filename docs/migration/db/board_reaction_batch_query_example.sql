-- ============================================================
-- BoardReactionRepository.countByBoardsGroupByReactionType()
-- JPQLì´ ìƒì„±í•˜ëŠ” ì‹¤ì œ SQL ì¿¼ë¦¬
-- ============================================================

-- ğŸ“Œ ì›ë³¸ JPQL ì¿¼ë¦¬:
-- SELECT br.board.idx as boardId, br.reactionType as reactionType, COUNT(br) as count
-- FROM BoardReaction br
-- WHERE br.board.idx IN :boardIds
-- GROUP BY br.board.idx, br.reactionType

-- ============================================================
-- ğŸ”´ ë¬¸ì œê°€ ë˜ëŠ” ì¿¼ë¦¬ (boardIdsê°€ ë§ì„ ë•Œ)
-- ============================================================
-- ê²Œì‹œê¸€ì´ 1000ê°œ ì´ìƒì¼ ë•Œ IN ì ˆì— ëª¨ë“  IDê°€ ë“¤ì–´ê°€ì„œ
-- SQLì´ ë§¤ìš° ê¸¸ì–´ì§€ê³  ì„±ëŠ¥ ë¬¸ì œ ë°œìƒ
-- ============================================================

SELECT
    br1_0.board_idx,
    br1_0.reaction_type,
    COUNT(br1_0.idx) as count
FROM
    board_reaction br1_0
WHERE
    br1_0.board_idx IN (
        ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,
        ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,
        ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,
        -- ... ìˆ˜ë°±~ìˆ˜ì²œ ê°œì˜ ? íŒŒë¼ë¯¸í„°ê°€ ê³„ì† ì´ì–´ì§
        ?, ?, ?, ?, ?, ?, ?, ?, ?, ?
    )
GROUP BY
    br1_0.board_idx,
    br1_0.reaction_type;

-- ============================================================
-- âœ… ê°œì„ ëœ ë°©ì‹ (ë°°ì¹˜ ì²˜ë¦¬)
-- ============================================================
-- boardIdsë¥¼ 500ê°œì”© ë‚˜ëˆ„ì–´ ì—¬ëŸ¬ ë²ˆ ì¿¼ë¦¬ ì‹¤í–‰
-- ê° ì¿¼ë¦¬ëŠ” ìµœëŒ€ 500ê°œì˜ íŒŒë¼ë¯¸í„°ë§Œ ì‚¬ìš©
-- ============================================================

-- ì²« ë²ˆì§¸ ë°°ì¹˜ (boardIds 1~500)
SELECT
    br1_0.board_idx,
    br1_0.reaction_type,
    COUNT(br1_0.idx) as count
FROM
    board_reaction br1_0
WHERE
    br1_0.board_idx IN (?, ?, ?, ..., ?)  -- ìµœëŒ€ 500ê°œ
GROUP BY
    br1_0.board_idx,
    br1_0.reaction_type;

-- ë‘ ë²ˆì§¸ ë°°ì¹˜ (boardIds 501~1000)
SELECT
    br1_0.board_idx,
    br1_0.reaction_type,
    COUNT(br1_0.idx) as count
FROM
    board_reaction br1_0
WHERE
    br1_0.board_idx IN (?, ?, ?, ..., ?)  -- ìµœëŒ€ 500ê°œ
GROUP BY
    br1_0.board_idx,
    br1_0.reaction_type;

-- ... í•„ìš”í•œ ë§Œí¼ ë°˜ë³µ

-- ============================================================
-- ğŸ“Š ì¿¼ë¦¬ ê²°ê³¼ í˜•íƒœ
-- ============================================================
-- Object[] ë°°ì—´ë¡œ ë°˜í™˜:
-- [0] = board_idx (Long)
-- [1] = reaction_type (ReactionType enum: "LIKE" or "DISLIKE")
-- [2] = count (Long)
--
-- ì˜ˆì‹œ ê²°ê³¼:
-- [1, "LIKE", 10]
-- [1, "DISLIKE", 2]
-- [2, "LIKE", 5]
-- [2, "DISLIKE", 0]
-- ============================================================

-- ============================================================
-- ğŸ’¡ ì°¸ê³ ì‚¬í•­
-- ============================================================
-- 1. í…Œì´ë¸”ëª…: board_reaction
-- 2. ì£¼ìš” ì»¬ëŸ¼:
--    - idx (PK)
--    - board_idx (FK to board.idx)
--    - user_idx (FK to user.idx)
--    - reaction_type (ENUM: 'LIKE', 'DISLIKE')
--    - created_at
-- 3. Hibernateê°€ ìƒì„±í•˜ëŠ” ë³„ì¹­: br1_0
-- 4. IN ì ˆ ìµœëŒ€ í¬ê¸° ê¶Œì¥ê°’: 500~1000ê°œ
-- ============================================================

