# DB 개념 어필 포인트 (SQL 제외)

## 1. 위치 기반 검색 최적화

### 어필 포인트
- **문제 인식**: 초기 로드 시 전체 데이터(약 22,000개)를 조회하여 성능 저하 발생
- **해결 전략**: 위치 기반 검색(ST_Distance_Sphere)을 활용하여 주변 10km 반경 내 서비스만 조회
- **DB 관점**: 
  - 조회 데이터 수: 22,699개 → 1,026개 (95.5% 감소)
  - DB 쿼리 실행 시간: 841ms → 500ms (40.4% 개선)
  - 네트워크 전송량: 22MB → 1MB (95.5% 감소)

### 말할 내용
> "위치 서비스 초기 로드 시 전체 데이터(약 22,000개)를 조회하여 성능 저하가 발생하는 문제를 발견했습니다. 이를 해결하기 위해 MySQL의 ST_Distance_Sphere 함수를 활용하여 사용자 위치 기준 10km 반경 내 서비스만 조회하도록 변경했습니다. 이를 통해 조회 데이터 수를 95.5% 감소시키고, DB 쿼리 실행 시간을 40.4% 개선했습니다."

---

## 2. 지리적 인덱스 활용

### 어필 포인트
- **공간 인덱스 이해**: 지리적 데이터 조회를 위한 공간 인덱스 활용
- **ST_Distance_Sphere 활용**: MySQL의 공간 함수를 활용한 거리 계산
- **쿼리 최적화**: 위치 기반 검색 시 인덱스 효율성 이해

### 말할 내용
> "위치 기반 검색을 위해 MySQL의 ST_Distance_Sphere 함수를 활용했습니다. 이를 통해 사용자 위치 기준 반경 내 서비스를 효율적으로 조회할 수 있었고, 공간 인덱스를 활용하여 성능을 최적화했습니다."

---

## 3. 시도/시군구 기반 검색 최적화

### 어필 포인트
- **인덱스 활용**: WHERE 조건을 사용한 시도/시군구 기반 검색으로 인덱스 활용
- **성능 비교**: 위치 기반 검색(ST_Distance_Sphere) 대비 약 5-6배 빠른 성능
- **일관성 확보**: 검색 기준을 시도/시군구로 확정하여 일관성 확보

### 말할 내용
> "위치 기반 검색의 성능 이슈를 해결하기 위해 시도/시군구 기반 검색으로 전환했습니다. WHERE 조건을 사용하여 인덱스를 효율적으로 활용할 수 있도록 했고, 위치 기반 검색(ST_Distance_Sphere) 대비 약 5-6배 빠른 성능을 달성했습니다. 또한 검색 기준을 시도/시군구로 확정하여 일관성을 확보했습니다."

---

## 4. 데이터베이스 부하 감소

### 어필 포인트
- **조회 데이터 수 감소**: 22,699개 → 1,026개 (95.5% 감소)
- **쿼리 실행 시간 개선**: 841ms → 500ms (40.4% 개선)
- **네트워크 전송량 감소**: 22MB → 1MB (95.5% 감소)

### 말할 내용
> "위치 기반 검색을 적용하여 조회 데이터 수를 95.5% 감소시켰고, DB 쿼리 실행 시간을 40.4% 개선했습니다. 또한 네트워크 전송량을 95.5% 감소시켜 대역폭을 절약했습니다."

---

## 5. 메모리 관리 및 GC 최적화

### 어필 포인트
- **메모리 사용량 측정**: 78.90 MB → 28.6 MB (63.8% 감소)
- **불필요한 데이터 로드 방지**: 필요한 데이터만 조회
- **GC 부하 감소**: 메모리 사용량 감소로 GC 부하 감소

### 말할 내용
> "전체 데이터를 조회하여 메모리에 로드하는 대신, 위치 기반 검색으로 필요한 데이터만 조회하도록 최적화했습니다. 이를 통해 메모리 사용량을 63.8% 감소시켰고, GC 부하를 줄여 서버 안정성을 향상시켰습니다."

---

## 6. 확장성 고려한 설계

### 어필 포인트
- **선형 확장성**: 데이터 증가 시에도 위치 기반 검색으로 성능 유지
- **성능 예측**: 데이터 증가에 따른 성능 저하 최소화
- **인덱스 활용**: 시도/시군구 기반 검색으로 인덱스 활용

### 말할 내용
> "위치 기반 검색을 적용하여 데이터가 증가해도 주변 서비스만 조회하므로 성능을 유지할 수 있도록 설계했습니다. 또한 시도/시군구 기반 검색으로 인덱스를 활용하여 데이터 증가 시에도 안정적인 성능을 보장했습니다."

---

## 7. 실제 운영 경험

### 어필 포인트
- **성능 측정**: 실제 운영 환경에서 성능 측정
- **문제 해결 과정**: 문제 발견 → 분석 → 해결 → 검증의 전체 과정
- **문서화**: 트러블슈팅 문서를 통한 지식 공유

### 말할 내용
> "실제 운영 중인 위치 서비스에서 초기 로드 시 성능 문제를 발견하고, 위치 기반 검색과 시도/시군구 기반 검색으로 해결했습니다. 전체 과정을 문서화하여 팀 내 지식 공유를 했습니다."

---

## 면접 대답 구성 예시

### 질문: "DB 관련 경험이 있나요?"

**대답 구조:**
1. **문제 발견** (30초)
   - "실제 운영 중인 위치 서비스에서 초기 로드 시 성능 저하를 발견했습니다."
   - "전체 데이터(약 22,000개)를 조회하여 DB 쿼리 실행 시간이 841ms로 느렸습니다."

2. **원인 분석** (1분)
   - "초기 로드 시 사용자가 실제로 보는 데이터는 주변 10km 이내 약 1,000개 정도인데, 전체 데이터를 조회하고 있었습니다."
   - "또한 네트워크로 22MB의 데이터를 전송하여 대역폭 낭비가 발생했습니다."

3. **해결 방법** (1분)
   - "MySQL의 ST_Distance_Sphere 함수를 활용하여 사용자 위치 기준 10km 반경 내 서비스만 조회하도록 변경했습니다."
   - "추가로 시도/시군구 기반 검색으로 전환하여 인덱스를 활용하고, 위치 기반 검색 대비 약 5-6배 빠른 성능을 달성했습니다."

4. **결과 및 학습** (30초)
   - "조회 데이터 수를 95.5% 감소시키고, DB 쿼리 실행 시간을 40.4% 개선했습니다."
   - "이 과정에서 공간 인덱스 활용, 지리적 데이터 조회 최적화 등 DB 관련 개념을 깊이 이해하게 되었습니다."

---

## 핵심 키워드

- **위치 기반 검색 최적화**
- **지리적 인덱스 활용**
- **ST_Distance_Sphere 활용**
- **시도/시군구 기반 검색**
- **인덱스 활용**
- **데이터베이스 부하 감소**
- **메모리 사용량 최적화**
- **확장성 고려한 설계**
- **실제 운영 경험**

---

## 추가 어필 포인트

### 1. 데이터베이스 성능 모니터링
- 실제 운영 환경에서 성능 측정
- 쿼리 실행 시간 측정
- 메모리 사용량 측정
- 네트워크 전송량 측정

### 2. 데이터베이스 설계
- 공간 인덱스 설계
- 조회 패턴 고려한 인덱스 설계
- 지리적 데이터 조회 최적화

### 3. 문제 해결 프로세스
- 문제 발견 → 분석 → 해결 → 검증
- 정량적 측정을 통한 검증
- 문서화를 통한 지식 공유

### 4. 성능 최적화 패턴
- 위치 기반 검색을 통한 데이터 양 감소
- 시도/시군구 기반 검색을 통한 인덱스 활용
- 공간 함수를 활용한 지리적 데이터 조회 최적화
