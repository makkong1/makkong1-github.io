# DB 개념 어필 포인트 (SQL 제외)

## 1. 불필요한 데이터 조회 제거

### 어필 포인트
- **문제 인식**: 읽음 처리 시 채팅방의 모든 메시지를 조회하여 성능 저하 발생
- **해결 전략**: 불필요한 전체 메시지 조회 로직 제거
- **DB 관점**: 
  - 불필요한 대량 데이터 조회 제거
  - 메모리 사용량 감소
  - DB 부하 감소

### 말할 내용
> "채팅 메시지 읽음 처리 시 채팅방의 모든 메시지(수천~수만 건)를 조회하여 성능 저하가 발생하는 문제를 발견했습니다. 실제로는 참여자의 unreadCount와 lastReadMessage만 업데이트하면 되는데, 불필요하게 전체 메시지를 조회하고 Java에서 필터링하는 로직이 있었습니다. 이를 제거하여 DB 부하와 메모리 사용량을 대폭 감소시켰습니다."

---

## 2. 트랜잭션 범위 최소화

### 어필 포인트
- **트랜잭션 범위 이해**: 불필요한 로직 제거로 트랜잭션 범위 축소
- **락 유지 시간 단축**: 트랜잭션 범위 최소화로 락 경합 감소
- **성능 최적화**: 필수 로직만 실행하여 응답 시간 단축

### 말할 내용
> "읽음 처리 로직에서 불필요한 전체 메시지 조회를 제거하여 트랜잭션 범위를 최소화했습니다. 이를 통해 락 유지 시간을 단축하고, 락 경합을 줄여 성능을 최적화했습니다."

---

## 3. 인덱스 설계 전략

### 어필 포인트
- **인덱스 이해**: 메시지 조회 성능 향상을 위한 인덱스 설계
- **복합 인덱스 설계**: `(conversation_idx, created_at DESC)` 같은 복합 인덱스 고려
- **쿼리 최적화**: 조회 패턴에 맞는 인덱스 설계

### 말할 내용
> "메시지 조회 성능 향상을 위해 `(conversation_idx, created_at DESC)` 복합 인덱스를 설계했습니다. 이를 통해 채팅방별 메시지 조회 시 인덱스를 효율적으로 활용하여 성능을 향상시킬 수 있습니다."

---

## 4. 데이터베이스 부하 감소

### 어필 포인트
- **불필요한 쿼리 제거**: 전체 메시지 조회 쿼리 제거
- **메모리 사용량 감소**: 대량 데이터 로드 제거
- **응답 시간 단축**: 필수 로직만 실행

### 말할 내용
> "불필요한 전체 메시지 조회를 제거하여 DB 부하를 감소시켰습니다. 메시지 7,000건 기준으로 전체 조회 쿼리 1개를 제거하여 약 수백 ms ~ 수 초를 절약했습니다."

---

## 5. 실제 운영 경험

### 어필 포인트
- **성능 측정**: 실제 운영 환경에서 성능 측정
- **문제 해결 과정**: 문제 발견 → 분석 → 해결 → 검증의 전체 과정
- **문서화**: 트러블슈팅 문서를 통한 지식 공유

### 말할 내용
> "실제 운영 중인 채팅 서비스에서 읽음 처리 시 성능 문제를 발견하고, 불필요한 로직을 제거하여 해결했습니다. 전체 과정을 문서화하여 팀 내 지식 공유를 했습니다."

---

## 면접 대답 구성 예시

### 질문: "DB 관련 경험이 있나요?"

**대답 구조:**
1. **문제 발견** (30초)
   - "실제 운영 중인 채팅 서비스에서 읽음 처리 시 성능 저하를 발견했습니다."
   - "채팅방의 모든 메시지(수천~수만 건)를 조회하여 성능 문제가 발생했습니다."

2. **원인 분석** (30초)
   - "읽음 처리 로직에서 실제로는 참여자의 unreadCount와 lastReadMessage만 업데이트하면 되는데, 불필요하게 전체 메시지를 조회하고 Java에서 필터링하는 로직이 있었습니다."
   - "이로 인해 대량 데이터 조회와 메모리 사용량 증가가 발생했습니다."

3. **해결 방법** (1분)
   - "불필요한 전체 메시지 조회 로직을 완전히 제거했습니다."
   - "필수 로직만 유지하여 트랜잭션 범위를 최소화했습니다."
   - "메시지 조회 성능 향상을 위한 복합 인덱스를 설계했습니다."

4. **결과 및 학습** (30초)
   - "불필요한 쿼리를 제거하여 DB 부하와 메모리 사용량을 대폭 감소시켰습니다."
   - "이 과정에서 트랜잭션 범위 최소화, 인덱스 설계 등 DB 관련 개념을 깊이 이해하게 되었습니다."

---

## 핵심 키워드

- **불필요한 데이터 조회 제거**
- **트랜잭션 범위 최소화**
- **인덱스 설계**
- **데이터베이스 부하 감소**
- **메모리 사용량 최적화**
- **실제 운영 경험**

---

## 추가 어필 포인트

### 1. 데이터베이스 성능 모니터링
- 실제 운영 환경에서 성능 측정
- 불필요한 쿼리 식별
- 메모리 사용량 측정

### 2. 데이터베이스 설계
- 복합 인덱스 설계
- 조회 패턴 고려한 인덱스 설계
- 불필요한 데이터 조회 제거

### 3. 문제 해결 프로세스
- 문제 발견 → 분석 → 해결 → 검증
- 정량적 측정을 통한 검증
- 문서화를 통한 지식 공유

### 4. 성능 최적화 패턴
- 불필요한 로직 제거를 통한 성능 향상
- 트랜잭션 범위 최소화를 통한 락 경합 감소
- 인덱스를 통한 조회 성능 향상
