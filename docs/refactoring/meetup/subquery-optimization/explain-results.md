# findAvailableMeetups() EXPLAIN ì‹¤í–‰ ê³„íš ë¶„ì„

## ðŸ“‹ ì¿¼ë¦¬ ì •ë³´

**ë¦¬íŒ©í† ë§ í›„ ì¿¼ë¦¬**:
```sql
SELECT m.*
FROM meetup m
LEFT JOIN meetupparticipants p ON p.meetup_idx = m.idx
WHERE m.date > '2026-02-08 00:00:00'
AND (m.is_deleted = false OR m.is_deleted IS NULL)
GROUP BY m.idx
HAVING COUNT(p.meetup_idx) < m.max_participants
ORDER BY m.date ASC;
```

---

## ðŸ“Š EXPLAIN ê²°ê³¼

| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |
|----|-------------|-------|------------|------|---------------|-----|---------|-----|------|----------|-------|
| 1 | SIMPLE | m | NULL | index | PRIMARY,organizer_idx,idx_meetup_status,idx_meetup_date,idx_meetup_location,idx_meetup_date_status | PRIMARY | 8 | NULL | 3319 | 5.06 | Using where; Using temporary; Using filesort |
| 1 | SIMPLE | p | NULL | ref | PRIMARY | PRIMARY | 8 | petory.m.idx | 1 | 100.00 | Using index |

---

## ðŸ” ìƒì„¸ ë¶„ì„

### meetup í…Œì´ë¸” (m)

**ì ‘ê·¼ ë°©ì‹**: `type=index`
- PRIMARY ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ìŠ¤ìº”
- `idx_meetup_date` ì¸ë±ìŠ¤ê°€ `possible_keys`ì— ìžˆì§€ë§Œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ

**ìŠ¤ìº” í–‰ ìˆ˜**: `rows=3319`
- ì „ì²´ meetup í…Œì´ë¸”ì˜ ëŒ€ë¶€ë¶„ì„ ìŠ¤ìº”

**í•„í„°ë§**: `filtered=5.06%`
- WHERE ì¡°ê±´ìœ¼ë¡œ ì•½ 5%ë§Œ í•„í„°ë§ë¨
- ì˜ˆìƒ ê²°ê³¼ í–‰ ìˆ˜: 3319 Ã— 5.06% â‰ˆ 168ê°œ

**Extra ì •ë³´**:
- `Using where`: WHERE ì¡°ê±´ ì‚¬ìš©
- `Using temporary`: GROUP BYë¥¼ ìœ„í•´ ìž„ì‹œ í…Œì´ë¸” ìƒì„±
- `Using filesort`: ORDER BYë¥¼ ìœ„í•´ íŒŒì¼ ì •ë ¬ ìˆ˜í–‰

### meetupparticipants í…Œì´ë¸” (p)

**ì ‘ê·¼ ë°©ì‹**: `type=ref`
- PRIMARY í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°ì¸
- `petory.m.idx`ë¥¼ ì°¸ì¡°

**ìŠ¤ìº” í–‰ ìˆ˜**: `rows=1`
- ê° meetupì— ëŒ€í•´ í‰ê·  1ê°œì˜ ì°¸ì—¬ìž í–‰ ì¡°íšŒ

**í•„í„°ë§**: `filtered=100%`
- ëª¨ë“  ì¡°ì¸ëœ í–‰ì´ ì‚¬ìš©ë¨

**Extra ì •ë³´**:
- `Using index`: ì»¤ë²„ë§ ì¸ë±ìŠ¤ ì‚¬ìš© (ì¸ë±ìŠ¤ë§Œìœ¼ë¡œ ë°ì´í„° ì¡°íšŒ)

---

## âš ï¸ ì„±ëŠ¥ ì´ìŠˆ

### 1. ì¸ë±ìŠ¤ ë¯¸í™œìš©
- **ë¬¸ì œ**: `idx_meetup_date` ì¸ë±ìŠ¤ê°€ `possible_keys`ì— ìžˆì§€ë§Œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ
- **ì›ì¸**: 
  - GROUP BYì™€ ORDER BYê°€ í•¨ê»˜ ì‚¬ìš©ë˜ì–´ ì¸ë±ìŠ¤ í™œìš©ì´ ì–´ë ¤ì›€
  - WHERE ì¡°ê±´ì´ ì¸ë±ìŠ¤ë¥¼ íƒ€ì§€ ì•Šê³  PRIMARY ì¸ë±ìŠ¤ í’€ ìŠ¤ìº” ìˆ˜í–‰
- **ì˜í–¥**: 3319ê°œ í–‰ì„ ìŠ¤ìº”í•˜ì—¬ ì„±ëŠ¥ ì €í•˜

### 2. ìž„ì‹œ í…Œì´ë¸” ì‚¬ìš©
- **ë¬¸ì œ**: `Using temporary` ë°œìƒ
- **ì›ì¸**: GROUP BY ì—°ì‚° ìˆ˜í–‰
- **ì˜í–¥**: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€, ë””ìŠ¤í¬ I/O ë°œìƒ ê°€ëŠ¥

### 3. íŒŒì¼ ì •ë ¬
- **ë¬¸ì œ**: `Using filesort` ë°œìƒ
- **ì›ì¸**: ORDER BY m.date ASC ìˆ˜í–‰
- **ì˜í–¥**: ì •ë ¬ì„ ìœ„í•œ ì¶”ê°€ ì‹œê°„ ì†Œìš”

---

## ðŸ’¡ ê°œì„  ë°©ì•ˆ

### 1. ì¸ë±ìŠ¤ ìµœì í™”
```sql
-- ë³µí•© ì¸ë±ìŠ¤ ì¶”ê°€ ê³ ë ¤
CREATE INDEX idx_meetup_date_deleted ON meetup(date, is_deleted);
```
- WHERE ì¡°ê±´ì˜ `date`ì™€ `is_deleted`ë¥¼ í•¨ê»˜ ì¸ë±ì‹±
- ì¸ë±ìŠ¤ ìŠ¤ìº”ìœ¼ë¡œ í•„í„°ë§ëœ í–‰ë§Œ ì¡°íšŒ ê°€ëŠ¥

### 2. ì¿¼ë¦¬ ìµœì í™” ì˜µì…˜
- í˜„ìž¬ ì¿¼ë¦¬ êµ¬ì¡°ëŠ” JOIN + GROUP BY + HAVINGì´ í•„ìˆ˜ì 
- ì„œë¸Œì¿¼ë¦¬ ë°©ì‹ë³´ë‹¤ëŠ” ê°œì„ ë˜ì—ˆì§€ë§Œ, ì¸ë±ìŠ¤ í™œìš©ë„ëŠ” ì—¬ì „ížˆ ë‚®ìŒ

### 3. ëŒ€ì•ˆ ê³ ë ¤
- **ì˜µì…˜ 1**: `currentParticipants` í•„ë“œë¥¼ ìœ ì§€í•˜ê³  ì—…ë°ì´íŠ¸ ì‹œ ë™ê¸°í™”
  - GROUP BY ì œê±° ê°€ëŠ¥
  - ì¸ë±ìŠ¤ í™œìš©ë„ í–¥ìƒ
- **ì˜µì…˜ 2**: ë·°(View) ìƒì„±
  - ì°¸ì—¬ìž ìˆ˜ë¥¼ ë¯¸ë¦¬ ê³„ì‚°í•˜ì—¬ ì €ìž¥
  - ì¿¼ë¦¬ ì„±ëŠ¥ í–¥ìƒ

---

## ðŸ“ˆ ë¦¬íŒ©í† ë§ ì „/í›„ ë¹„êµ

### ë¦¬íŒ©í† ë§ ì „ (ì„œë¸Œì¿¼ë¦¬)
- **ì¿¼ë¦¬ ìˆ˜**: PrepareStatement 6ê°œ
- **ì‹¤í–‰ ì‹œê°„**: 108ms
- **ì¸ë±ìŠ¤**: ì„œë¸Œì¿¼ë¦¬ë¡œ ì¸í•´ ì¸ë±ìŠ¤ í™œìš© ì œí•œ

### ë¦¬íŒ©í† ë§ í›„ (JOIN + GROUP BY)
- **ì¿¼ë¦¬ ìˆ˜**: PrepareStatement 1ê°œ âœ…
- **ì‹¤í–‰ ì‹œê°„**: ì¸¡ì • í•„ìš”
- **ì¸ë±ìŠ¤**: PRIMARY ì¸ë±ìŠ¤ ì‚¬ìš© (ìµœì í™” ì—¬ì§€ ìžˆìŒ)
- **ìž„ì‹œ í…Œì´ë¸”**: GROUP BYë¡œ ì¸í•´ ì‚¬ìš©
- **íŒŒì¼ ì •ë ¬**: ORDER BYë¡œ ì¸í•´ ì‚¬ìš©

---

## ðŸ“ ê²°ë¡ 

ë¦¬íŒ©í† ë§ìœ¼ë¡œ ì¿¼ë¦¬ ìˆ˜ëŠ” 6ê°œ â†’ 1ê°œë¡œ ê°ì†Œí–ˆì§€ë§Œ, EXPLAIN ê²°ê³¼ë¥¼ ë³´ë©´:
1. âœ… **ì¿¼ë¦¬ ìˆ˜ ê°ì†Œ**: ì„œë¸Œì¿¼ë¦¬ ì œê±°ë¡œ ë‹¨ì¼ ì¿¼ë¦¬ë¡œ í†µí•©
2. âš ï¸ **ì¸ë±ìŠ¤ ë¯¸í™œìš©**: `idx_meetup_date` ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ì§€ ëª»í•¨
3. âš ï¸ **ìž„ì‹œ í…Œì´ë¸”/íŒŒì¼ ì •ë ¬**: GROUP BYì™€ ORDER BYë¡œ ì¸í•œ ì¶”ê°€ ë¹„ìš©

**ì¶”ê°€ ìµœì í™” í•„ìš”**:
- ë³µí•© ì¸ë±ìŠ¤ ì¶”ê°€ (`date`, `is_deleted`)
- ë˜ëŠ” `currentParticipants` í•„ë“œ í™œìš© ê³ ë ¤

---

## ðŸ”— ê´€ë ¨ ë¬¸ì„œ

- [ë¦¬íŒ©í† ë§ ì „ ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼](./performance-results-before.md)
- [ì„œë¸Œì¿¼ë¦¬ ìµœì í™” ë¬¸ì„œ](./ì„œë¸Œì¿¼ë¦¬%20ìµœì í™”.md)
